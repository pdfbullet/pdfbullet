import{r as n,u as S,a2 as I,d as F,j as e,B as E,a3 as L,a4 as C,a0 as D,a5 as P,Y as A,a6 as O,L as W}from"./main-Dd6iyLpQ.js";import{F as G}from"./FaceLoginModal-D8CxyOMn.js";import"./react-Ckhrjn13.js";const Y=c=>{const t=/iPhone|iPad|iPod/i.test(navigator.userAgent),i=/Android/i.test(navigator.userAgent);return t?"Sign in with Face ID / Touch ID":i?"Sign in with Fingerprint":"Sign in with Passkey"},U=({onOpenForgotPasswordModal:c})=>{const[t,i]=n.useState(""),[d,x]=n.useState(""),[u,r]=n.useState(""),[l,o]=n.useState(!1),[b,p]=n.useState(!1),{loginOrSignupWithGoogle:h,signInWithEmail:f,loginOrSignupWithGithub:y,signInWithCustomToken:w}=S(),{login:k,isWebAuthnSupported:j}=I(),g=F(),v=async()=>{if(!t){r("Please enter your email to find your passkeys.");return}r(""),o(!0);try{const a=await k(t);if(a.token)await w(a.token);else throw new Error("Passkey verification failed.")}catch(a){r(a.message||"Passkey login failed.")}finally{o(!1)}},N=async a=>{a.preventDefault(),r(""),o(!0);try{await f(t,d)}catch(s){["auth/user-not-found","auth/wrong-password","auth/invalid-credential","auth/invalid-email"].includes(s.code)?r("Invalid email or password."):r("An unexpected error occurred.")}finally{o(!1)}},m=async a=>{r(""),o(!0);try{const s={from:g.state?.from,plan:g.state?.plan};sessionStorage.setItem("postLoginRedirect",JSON.stringify(s)),a==="google"&&await h(),a==="github"&&await y()}catch(s){s.code!=="auth/popup-closed-by-user"&&r(s.message||`Failed to sign in with ${a}.`)}finally{o(!1)}},B=Y();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-red-50 via-gray-50 to-blue-50 dark:from-gray-900 dark:via-black dark:to-gray-800 p-4",children:e.jsxs("div",{className:"w-full max-w-sm space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"h-12 w-auto mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Welcome Back"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Log in to your account to continue"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>m("google"),className:"social-btn",children:[e.jsx(L,{className:"h-5 w-5"})," Continue with Google"]}),e.jsxs("button",{onClick:()=>m("github"),className:"social-btn bg-gray-800 text-white hover:bg-gray-900 dark:bg-gray-700 dark:hover:bg-gray-600",children:[e.jsx(C,{className:"h-5 w-5"})," Continue with GitHub"]})]}),e.jsx("div",{className:"separator",children:"OR"}),u&&e.jsx("p",{className:"text-center text-sm text-red-500 font-semibold bg-red-100 dark:bg-red-900/20 p-3 rounded-md",children:u}),e.jsxs("form",{className:"space-y-4",onSubmit:N,children:[e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"input-icon"}),e.jsx("input",{type:"text",autoComplete:"username",required:!0,value:t,onChange:a=>i(a.target.value),className:"input-field",placeholder:"Username or Email"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"input-icon"}),e.jsx("input",{type:"password",autoComplete:"current-password",required:!0,value:d,onChange:a=>x(a.target.value),className:"input-field",placeholder:"Password"})]}),e.jsx("div",{className:"text-right text-sm",children:e.jsx("button",{type:"button",onClick:c,className:"font-medium text-brand-red hover:underline",children:"Forgot password?"})}),e.jsx("button",{type:"submit",disabled:l,className:"primary-btn",children:l?"Signing In...":"Log In"})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsxs("button",{onClick:()=>p(!0),className:"secondary-btn",children:[e.jsx(A,{className:"h-5 w-5"})," Continue with Face ID"]}),j&&e.jsxs("button",{onClick:v,disabled:l,className:"secondary-btn",children:[e.jsx(O,{className:"h-5 w-5"})," ",B]})]}),e.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",e.jsx(W,{to:"/signup",className:"font-medium text-brand-red hover:underline",children:"Sign up"})]})]})}),e.jsx(G,{mode:"login",isOpen:b,onClose:()=>p(!1)}),e.jsx("style",{children:`
        .social-btn { display: flex; justify-content: center; align-items: center; gap: 0.75rem; border-radius: 0.5rem; border: 1px solid #D1D5DB; background-color: white; padding: 0.75rem 1rem; font-semibold; transition: all 0.2s; box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); }
        .dark .social-btn { border-color: #4B5563; background-color: #1F2937; color: #E5E7EB; }
        .social-btn:hover { background-color: #F9FAFB; transform: translateY(-1px); box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .dark .social-btn:hover { background-color: #374151; }
        .separator { position: relative; text-align: center; color: #6B7280; font-size: 0.875rem; margin: 1.5rem 0; }
        .separator::before, .separator::after { content: ''; position: absolute; top: 50%; width: calc(50% - 20px); border-top: 1px solid #E5E7EB; }
        .dark .separator::before, .dark .separator::after { border-color: #374151; }
        .separator::before { left: 0; }
        .separator::after { right: 0; }
        .input-icon { position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); color: #9CA3AF; }
        .input-field { width: 100%; border-radius: 0.5rem; border: 1px solid #D1D5DB; background-color: white; padding: 0.75rem 0.75rem 0.75rem 2.5rem; transition: border-color 0.2s, box-shadow 0.2s; }
        .dark .input-field { border-color: #4B5563; background-color: #1F2937; }
        .input-field:focus { outline: none; border-color: #B90B06; box-shadow: 0 0 0 1px #B90B06; }
        .primary-btn { width: 100%; background-color: #B90B06; color: white; font-weight: 700; padding: 0.75rem; border-radius: 0.5rem; transition: all 0.2s; box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); }
        .primary-btn:hover { background-color: #991B1B; transform: translateY(-1px); box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .primary-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .secondary-btn { width: 100%; display: flex; justify-content: center; align-items: center; gap: 0.75rem; border-radius: 0.5rem; border: 1px solid #D1D5DB; background-color: white; padding: 0.75rem 1rem; font-semibold; transition: all 0.2s; box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); }
        .dark .secondary-btn { border-color: #4B5563; background-color: #1F2937; color: #E5E7EB; }
        .secondary-btn:hover { background-color: #F9FAFB; transform: translateY(-1px); box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .dark .secondary-btn:hover { background-color: #374151; }
        .secondary-btn:disabled { opacity: 0.5; cursor: not-allowed; }
      `})]})};export{U as default};
