import{a as w,r as x,j as e,aI as k,aG as S,E as C,y as D}from"./main-SNTVbf7n.js";import{u as I,S as E}from"./useSignature-BhWNAZ3q.js";import{u as M}from"./useSignedDocuments-D3masoA8.js";import"./react-Ckhrjn13.js";import"./html2canvas.esm-B0tyYwQk.js";import"./useLastTasks-B2XW8JSa.js";const O=({onEdit:a,onDelete:t})=>e.jsxs("div",{className:"absolute top-8 right-4 w-40 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg z-10",children:[e.jsxs("button",{onClick:a,className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(C,{className:"h-4 w-4"})," Edit Signature"]}),e.jsxs("button",{onClick:t,className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:[e.jsx(D,{className:"h-4 w-4"})," Delete Signature"]})]}),q=()=>{const a=w(),{signature:t,saveSignature:m,deleteSignature:h}=I(),{documents:b,loading:p}=M(),[y,s]=x.useState(!1),[u,o]=x.useState(!1),[r,i]=x.useState("signed"),f=()=>{window.confirm("Are you sure you want to delete your saved signature?")&&(h(),o(!1))},j=()=>{o(!1),s(!0)},v=(l,d)=>{m(l,d),s(!1),a("/sign-pdf")},n=b.length>0?b[0]:null,N=l=>{const d=Math.floor((new Date().getTime()-l)/1e3);if(d<60)return"Just now";const c=Math.floor(d/60);if(c<60)return`${c} minutes ago`;const g=Math.floor(c/60);return g<24?`${g} hours ago`:`${Math.floor(g/24)} days ago`};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 dark:text-gray-100",children:"Signatures Overview"}),e.jsx("button",{onClick:()=>s(!0),className:"bg-brand-red hover:bg-brand-red-dark text-white font-bold py-2 px-6 rounded-md transition-colors",children:"New signature"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-lg shadow-lg border border-gray-200 dark:border-gray-800",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Your signature"}),e.jsx("div",{className:"relative flex items-center justify-center h-40 bg-gray-50 dark:bg-gray-900/50 rounded-md border border-gray-200 dark:border-gray-700",children:t&&t.signature?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t.signature,alt:"Your saved signature",className:"max-h-24"}),e.jsxs("div",{className:"absolute top-2 right-2",children:[e.jsx("button",{onClick:()=>o(!u),className:"p-2 text-gray-500 hover:text-gray-800 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(k,{className:"h-5 w-5"})}),u&&e.jsx(O,{onEdit:j,onDelete:f})]})]}):e.jsxs("button",{onClick:()=>s(!0),className:"text-center text-gray-500 hover:text-brand-red",children:[e.jsx("p",{className:"text-2xl",children:"+"}),e.jsx("p",{children:"Create your signature"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-lg shadow-lg border border-gray-200 dark:border-gray-800 flex flex-col",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Digital Signatures"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex-grow",children:"Certificate-based signatures are necessary to legally validate the signature's authenticity. You can acquire certified signatures by subscribing to I Love PDFLY Premium or purchasing a prepaid package."}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>a("/pricing"),className:"w-full bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-bold py-2 px-4 rounded-md transition-colors",children:"Upgrade to Premium"})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-lg shadow-lg border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Last activity"}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-6",children:[e.jsx("button",{onClick:()=>i("sent"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${r==="sent"?"border-brand-red text-brand-red":"border-transparent text-gray-500 hover:text-brand-red"}`,children:"Sent"}),e.jsx("button",{onClick:()=>i("inbox"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${r==="inbox"?"border-brand-red text-brand-red":"border-transparent text-gray-500 hover:text-brand-red"}`,children:"Inbox"}),e.jsx("button",{onClick:()=>i("signed"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${r==="signed"?"border-brand-red text-brand-red":"border-transparent text-gray-500 hover:text-brand-red"}`,children:"Signed"})]})})]}),e.jsxs("div",{className:"p-2",children:[r==="sent"&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"You haven't sent any signature requests yet."}),r==="inbox"&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"You don't have any pending signature requests."}),r==="signed"&&e.jsxs("div",{className:"p-4 text-center text-gray-500",children:["This section will show your signed documents.",p?e.jsx("div",{className:"mt-4 p-4 animate-pulse",children:"Loading..."}):n?e.jsxs("div",{className:"mt-4 border rounded-lg p-4 flex items-center justify-between text-left",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:n.signedFileName}),e.jsxs("p",{className:"text-xs",children:["Signed ",N(n.createdAt)]})]})]}),e.jsx("span",{className:"text-xs font-bold text-green-600 bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded-full",children:n.status.toUpperCase()})]}):e.jsx("div",{className:"mt-4 p-4",children:"You have no signed documents yet."})]})]})]})]}),e.jsx(E,{isOpen:y,onClose:()=>s(!1),onSave:v})]})};export{q as default};
