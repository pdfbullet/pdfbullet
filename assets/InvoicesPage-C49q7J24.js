import{u as c,r as o,j as t,L as n,S as x,D as m}from"./main-De9F_IFz.js";import{E as h}from"./jspdf.es.min-BfHMLJvt.js";import"./react-Ckhrjn13.js";const y=()=>{const{user:a}=c(),[l,d]=o.useState([]);o.useEffect(()=>{if(a?.isPremium&&a.creationDate){const s=new Date(a.creationDate),e=[];e.push({id:`INV-${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`,invoiceDate:s.toISOString().split("T")[0],status:"Paid",details:"Premium Plan - Yearly Subscription",amount:5,paymentMethod:"Card"});let r=new Date(s);for(r.setFullYear(r.getFullYear()+1);r<new Date;)e.push({id:`INV-${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`,invoiceDate:r.toISOString().split("T")[0],status:"Paid",details:"Premium Plan - Yearly Renewal",amount:5,paymentMethod:"Card"}),r.setFullYear(r.getFullYear()+1);d(e.reverse())}},[a]);const i=s=>{const e=new h("p","mm","a4");e.setFontSize(22),e.setFont("helvetica","bold"),e.text("INVOICE",14,22),e.setFontSize(10),e.text("PDFBullet",14,30),e.text("Kathmandu, Nepal",14,35),e.text("Support@pdfbullet.com",14,40),e.setFont("helvetica","normal"),e.text(`Invoice #: ${s.id}`,148,22),e.text(`Invoice Date: ${s.invoiceDate}`,148,28),e.text(`Due Date: ${s.invoiceDate}`,148,34),e.setFont("helvetica","bold"),e.text("Bill To:",14,55),e.setFont("helvetica","normal"),e.text(a?.businessDetails?.companyName||a?.username||"N/A",14,61),e.text(a?.businessDetails?.address||"Address not provided",14,66),e.text(a?.businessDetails?.city||"",14,71),e.text(a?.businessDetails?.country||"",14,76),e.setFillColor(230,230,230),e.rect(14,90,182,8,"F"),e.setFont("helvetica","bold"),e.text("Description",16,95),e.text("Amount",180,95,{align:"right"}),e.setFont("helvetica","normal"),e.text(s.details,16,105),e.text(`$${s.amount.toFixed(2)}`,180,105,{align:"right"}),e.line(120,120,196,120),e.setFont("helvetica","bold"),e.text("Total",122,125),e.text(`$${s.amount.toFixed(2)}`,180,125,{align:"right"}),e.setFontSize(9),e.setTextColor(150),e.text("Thank you for your business!",14,280),e.save(`invoice-${s.id}.pdf`)};return t.jsxs("div",{className:"w-full",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 dark:text-gray-100",children:"Invoice history"}),!a?.isPremium&&t.jsxs(n,{to:"/pricing",className:"bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-bold py-2 px-4 rounded-md flex items-center gap-2 transition-colors text-sm",children:[t.jsx(x,{className:"h-5 w-5"}),t.jsx("span",{children:"Upgrade to Premium"})]})]}),t.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-lg shadow-lg border border-gray-200 dark:border-gray-800",children:[t.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:t.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"All invoices"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm text-left",children:[t.jsx("thead",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase bg-gray-50 dark:bg-gray-800",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-6 py-3",children:"Invoice Date"}),t.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),t.jsx("th",{scope:"col",className:"px-6 py-3",children:"Details"}),t.jsx("th",{scope:"col",className:"px-6 py-3",children:"Amount"}),t.jsx("th",{scope:"col",className:"px-6 py-3",children:"Payment Method"}),t.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Download"})]})}),t.jsx("tbody",{children:a?.isPremium&&l.length>0?l.map(s=>t.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[t.jsx("td",{className:"px-6 py-4 font-semibold text-gray-800 dark:text-gray-100",children:s.invoiceDate}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"px-3 py-1 text-xs font-semibold text-green-800 bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded-full",children:s.status})}),t.jsx("td",{className:"px-6 py-4",children:s.details}),t.jsxs("td",{className:"px-6 py-4",children:["$",s.amount.toFixed(2)]}),t.jsx("td",{className:"px-6 py-4",children:s.paymentMethod}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsx("button",{onClick:()=>i(s),className:"p-2 text-gray-500 hover:text-brand-red rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:`Download invoice ${s.id}`,children:t.jsx(m,{className:"h-5 w-5"})})})]},s.id)):t.jsx("tr",{children:t.jsxs("td",{colSpan:6,className:"text-center py-12 px-6 text-gray-500 dark:text-gray-400",children:["You have no invoices yet.",!a?.isPremium&&t.jsxs("p",{className:"mt-2",children:[t.jsx(n,{to:"/pricing",className:"text-brand-red font-semibold hover:underline",children:"Upgrade to Premium"})," to start your subscription."]})]})})})]})})]})]})};export{y as default};
