import{r as n,u as I,a2 as B,d as F,j as e,B as D,a3 as E,a4 as L,a0 as C,a5 as P,Y as A,a6 as O,L as W}from"./main-DebOd4xP.js";import{F as G}from"./FaceLoginModal-CZS-QPid.js";import"./react-Ckhrjn13.js";const T=l=>{const r=/iPhone|iPad|iPod/i.test(navigator.userAgent),i=/Android/i.test(navigator.userAgent);return r?"Sign in with Face ID / Touch ID":i?"Sign in with Fingerprint":"Sign in with Passkey"},q=({onOpenForgotPasswordModal:l})=>{const[r,i]=n.useState(""),[d,h]=n.useState(""),[u,t]=n.useState(""),[c,s]=n.useState(!1),[b,m]=n.useState(!1),{loginOrSignupWithGoogle:x,signInWithEmail:f,loginOrSignupWithGithub:y,signInWithCustomToken:k}=I(),{login:w,isWebAuthnSupported:j}=B(),g=F(),v=async()=>{if(!r){t("Please enter your email to find your passkeys.");return}t(""),s(!0);try{const a=await w(r);if(a.token)await k(a.token);else throw new Error("Passkey verification failed.")}catch(a){t(a.message||"Passkey login failed.")}finally{s(!1)}},N=async a=>{a.preventDefault(),t(""),s(!0);try{await f(r,d)}catch(o){["auth/user-not-found","auth/wrong-password","auth/invalid-credential","auth/invalid-email"].includes(o.code)?t("Invalid email or password."):t("An unexpected error occurred.")}finally{s(!1)}},p=async a=>{t(""),s(!0);try{const o={from:g.state?.from,plan:g.state?.plan};sessionStorage.setItem("postLoginRedirect",JSON.stringify(o)),a==="google"&&await x(),a==="github"&&await y()}catch(o){o.code!=="auth/popup-closed-by-user"&&t(o.message||`Failed to sign in with ${a}.`)}finally{s(!1)}},S=T();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 dark:bg-black p-4",children:e.jsxs("div",{className:"w-full max-w-sm space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(D,{className:"h-12 w-auto mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Welcome Back"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Log in to your account to continue"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>p("google"),className:"social-btn",children:[e.jsx(E,{className:"h-5 w-5"})," Google"]}),e.jsxs("button",{onClick:()=>p("github"),className:"social-btn bg-gray-800 text-white hover:bg-gray-900 dark:bg-gray-700 dark:hover:bg-gray-600",children:[e.jsx(L,{className:"h-5 w-5"})," GitHub"]})]}),e.jsx("div",{className:"separator",children:"OR"}),u&&e.jsx("p",{className:"text-center text-sm text-red-500 font-semibold",children:u}),e.jsxs("form",{className:"space-y-4",onSubmit:N,children:[e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"input-icon"}),e.jsx("input",{type:"text",autoComplete:"username",required:!0,value:r,onChange:a=>i(a.target.value),className:"input-field",placeholder:"Username or Email"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"input-icon"}),e.jsx("input",{type:"password",autoComplete:"current-password",required:!0,value:d,onChange:a=>h(a.target.value),className:"input-field",placeholder:"Password"})]}),e.jsx("div",{className:"text-right text-sm",children:e.jsx("button",{type:"button",onClick:l,className:"font-medium text-brand-red hover:underline",children:"Forgot password?"})}),e.jsx("button",{type:"submit",disabled:c,className:"primary-btn",children:c?"Signing In...":"Log In"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>m(!0),className:"secondary-btn",children:[e.jsx(A,{className:"h-5 w-5"})," Continue with Face ID"]}),j&&e.jsxs("button",{onClick:v,disabled:c,className:"secondary-btn",children:[e.jsx(O,{className:"h-5 w-5"})," ",S]})]}),e.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",e.jsx(W,{to:"/signup",className:"font-medium text-brand-red hover:underline",children:"Sign up"})]})]})}),e.jsx(G,{mode:"login",isOpen:b,onClose:()=>m(!1)}),e.jsx("style",{children:`
        .social-btn { display: flex; justify-content: center; align-items: center; gap: 0.5rem; border-radius: 0.5rem; border: 1px solid #D1D5DB; background-color: white; padding: 0.625rem 1rem; font-semibold; transition: background-color 0.2s; }
        .dark .social-btn { border-color: #4B5563; background-color: #1F2937; color: #E5E7EB; }
        .social-btn:hover { background-color: #F9FAFB; }
        .dark .social-btn:hover { background-color: #374151; }
        .separator { position: relative; text-align: center; color: #6B7280; font-size: 0.875rem; margin: 1.5rem 0; }
        .separator::before, .separator::after { content: ''; position: absolute; top: 50%; width: calc(50% - 20px); border-top: 1px solid #D1D5DB; }
        .dark .separator::before, .dark .separator::after { border-color: #4B5563; }
        .separator::before { left: 0; }
        .separator::after { right: 0; }
        .input-icon { position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); color: #9CA3AF; }
        .input-field { width: 100%; border-radius: 0.5rem; border: 1px solid #D1D5DB; background-color: white; padding: 0.625rem 0.75rem 0.625rem 2.5rem; }
        .dark .input-field { border-color: #4B5563; background-color: #1F2937; }
        .primary-btn { width: 100%; background-color: #B90B06; color: white; font-weight: 700; padding: 0.625rem; border-radius: 0.5rem; }
        .primary-btn:hover { background-color: #991B1B; }
        .primary-btn:disabled { opacity: 0.5; }
        .secondary-btn { width: 100%; display: flex; justify-content: center; align-items: center; gap: 0.5rem; border-radius: 0.5rem; border: 1px solid #D1D5DB; background-color: white; padding: 0.625rem 1rem; font-semibold; transition: background-color 0.2s; }
        .dark .secondary-btn { border-color: #4B5563; background-color: #1F2937; color: #E5E7EB; }
        .secondary-btn:hover { background-color: #F9FAFB; }
        .dark .secondary-btn:hover { background-color: #374151; }
        .secondary-btn:disabled { opacity: 0.5; }
      `})]})};export{q as default};
