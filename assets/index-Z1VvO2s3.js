import{r as Nt}from"./index-DRz5BQNA.js";var Yn=Nt(),et=[void 0,"outer bevel","inner bevel","emboss","pillow emboss","stroke emboss"];function kn(n){return un(n,"8BIM"),Gn[O(n)]||"normal"}function wn(n,e){F(n,"8BIM"),F(n,Rt[e]||"norm")}function In(n){return k(n)/255}function xn(n,e){C(n,Math.round(e*255)|0)}function Vt(n){var e=I(n);if(e!==0)throw new Error("Invalid effects layer version: "+e);for(var t=I(n),i={},r=0;r<t;r++){un(n,"8BIM");var o=O(n);switch(o){case"cmnS":{var l=g(n),a=g(n),s=!!k(n);if(w(n,2),l!==7||a!==0||!s)throw new Error("Invalid effects common state");break}case"dsdw":case"isdw":{var u=g(n),f=g(n);if(u!==41&&u!==51)throw new Error("Invalid shadow size: "+u);if(f!==0&&f!==2)throw new Error("Invalid shadow version: "+f);var l=U(n);U(n);var p=U(n),h=U(n),d=B(n),v=kn(n),S=!!k(n),m=!!k(n),c=In(n);u>=51&&B(n);var b={size:{units:"Pixels",value:l},distance:{units:"Pixels",value:h},angle:p,color:d,blendMode:v,enabled:S,useGlobalLight:m,opacity:c};o==="dsdw"?i.dropShadow=b:i.innerShadow=b;break}case"oglw":{var u=g(n),M=g(n);if(u!==32&&u!==42)throw new Error("Invalid outer glow size: "+u);if(M!==0&&M!==2)throw new Error("Invalid outer glow version: "+M);var l=U(n);U(n);var d=B(n),v=kn(n),S=!!k(n),c=In(n);u>=42&&B(n),i.outerGlow={size:{units:"Pixels",value:l},color:d,blendMode:v,enabled:S,opacity:c};break}case"iglw":{var u=g(n),P=g(n);if(u!==32&&u!==43)throw new Error("Invalid inner glow size: "+u);if(P!==0&&P!==2)throw new Error("Invalid inner glow version: "+P);var l=U(n);U(n);var d=B(n),v=kn(n),S=!!k(n),c=In(n);u>=43&&(k(n),B(n)),i.innerGlow={size:{units:"Pixels",value:l},color:d,blendMode:v,enabled:S,opacity:c};break}case"bevl":{var u=g(n),Z=g(n);if(u!==58&&u!==78)throw new Error("Invalid bevel size: "+u);if(Z!==0&&Z!==2)throw new Error("Invalid bevel version: "+Z);var p=U(n),J=U(n),l=U(n),j=kn(n),fn=kn(n),Y=B(n),cn=B(n),Q=et[k(n)]||"inner bevel",X=In(n),hn=In(n),S=!!k(n),m=!!k(n),vn=k(n)?"down":"up";u>=78&&(B(n),B(n)),i.bevel={size:{units:"Pixels",value:l},angle:p,strength:J,highlightBlendMode:j,shadowBlendMode:fn,highlightColor:Y,shadowColor:cn,style:Q,highlightOpacity:X,shadowOpacity:hn,enabled:S,useGlobalLight:m,direction:vn};break}case"sofi":{var l=g(n),dn=g(n);if(l!==34)throw new Error("Invalid effects solid fill info size: "+l);if(dn!==2)throw new Error("Invalid effects solid fill info version: "+dn);var v=kn(n),d=B(n),c=In(n),S=!!k(n);B(n),i.solidFill={blendMode:v,color:d,opacity:c,enabled:S};break}default:throw new Error("Invalid effect type: '"+o+"'")}}return i}function we(n,e){var t,i,r;y(n,51),y(n,2),N(n,((t=e.size)===null||t===void 0?void 0:t.value)||0),N(n,0),N(n,e.angle||0),N(n,((i=e.distance)===null||i===void 0?void 0:i.value)||0),z(n,e.color),wn(n,e.blendMode),C(n,e.enabled?1:0),C(n,e.useGlobalLight?1:0),xn(n,(r=e.opacity,r??1)),z(n,e.color)}function jt(n,e){var t,i,r;x(n,0);var o=1;if(e.dropShadow&&o++,e.innerShadow&&o++,e.outerGlow&&o++,e.innerGlow&&o++,e.bevel&&o++,e.solidFill&&o++,x(n,o),F(n,"8BIM"),F(n,"cmnS"),y(n,7),y(n,0),C(n,1),$(n,2),e.dropShadow&&(F(n,"8BIM"),F(n,"dsdw"),we(n,e.dropShadow)),e.innerShadow&&(F(n,"8BIM"),F(n,"isdw"),we(n,e.innerShadow)),e.outerGlow&&(F(n,"8BIM"),F(n,"oglw"),y(n,42),y(n,2),N(n,((t=e.outerGlow.size)===null||t===void 0?void 0:t.value)||0),N(n,0),z(n,e.outerGlow.color),wn(n,e.outerGlow.blendMode),C(n,e.outerGlow.enabled?1:0),xn(n,e.outerGlow.opacity||0),z(n,e.outerGlow.color)),e.innerGlow&&(F(n,"8BIM"),F(n,"iglw"),y(n,43),y(n,2),N(n,((i=e.innerGlow.size)===null||i===void 0?void 0:i.value)||0),N(n,0),z(n,e.innerGlow.color),wn(n,e.innerGlow.blendMode),C(n,e.innerGlow.enabled?1:0),xn(n,e.innerGlow.opacity||0),C(n,0),z(n,e.innerGlow.color)),e.bevel){F(n,"8BIM"),F(n,"bevl"),y(n,78),y(n,2),N(n,e.bevel.angle||0),N(n,e.bevel.strength||0),N(n,((r=e.bevel.size)===null||r===void 0?void 0:r.value)||0),wn(n,e.bevel.highlightBlendMode),wn(n,e.bevel.shadowBlendMode),z(n,e.bevel.highlightColor),z(n,e.bevel.shadowColor);var l=et.indexOf(e.bevel.style);C(n,l<=0?1:l),xn(n,e.bevel.highlightOpacity||0),xn(n,e.bevel.shadowOpacity||0),C(n,e.bevel.enabled?1:0),C(n,e.bevel.useGlobalLight?1:0),C(n,e.bevel.direction==="down"?1:0),z(n,e.bevel.highlightColor),z(n,e.bevel.shadowColor)}e.solidFill&&(F(n,"8BIM"),F(n,"sofi"),y(n,34),y(n,2),wn(n,e.solidFill.blendMode),z(n,e.solidFill.color),xn(n,e.solidFill.opacity||0),C(n,e.solidFill.enabled?1:0),z(n,e.solidFill.color))}function Xt(n){var e={};return Object.keys(n).forEach(function(t){return e[n[t]]=t}),e}var En={"#Ang":"Angle","#Rsl":"Density","#Rlt":"Distance","#Nne":"None","#Prc":"Percent","#Pxl":"Pixels","#Mlm":"Millimeters","#Pnt":"Points",RrPi:"Picas",RrIn:"Inches",RrCm:"Centimeters"},Hn=Xt(En),tt={printProofSetup:{name:"Proof Setup",classID:"proofSetup"},Grad:{name:"Gradient",classID:"Grdn"},ebbl:{name:"",classID:"ebbl"},SoFi:{name:"",classID:"SoFi"},GrFl:{name:"",classID:"GrFl"},sdwC:{name:"",classID:"RGBC"},hglC:{name:"",classID:"RGBC"},"Clr ":{name:"",classID:"RGBC"},Ofst:{name:"",classID:"Pnt "},ChFX:{name:"",classID:"ChFX"},MpgS:{name:"",classID:"ShpC"},DrSh:{name:"",classID:"DrSh"},IrSh:{name:"",classID:"IrSh"},OrGl:{name:"",classID:"OrGl"},IrGl:{name:"",classID:"IrGl"},TrnS:{name:"",classID:"ShpC"},Ptrn:{name:"",classID:"Ptrn"},FrFX:{name:"",classID:"FrFX"},strokeStyleContent:{name:"",classID:"solidColorLayer"},patternFill:{name:"",classID:"patternFill"},phase:{name:"",classID:"Pnt "}},it={"Crv ":{name:"",classID:"CrPt"},Clrs:{name:"",classID:"Clrt"},Trns:{name:"",classID:"TrnS"}},xe={TEXT:["Txt ","printerName","Nm  ","Idnt"],tdta:["EngineData"],long:["TextIndex","RndS","Mdpn","Smth","Lctn","strokeStyleVersion"],enum:["textGridding","Ornt","warpStyle","warpRotate","Inte","Bltn","ClrS","sdwM","hglM","bvlT","bvlS","bvlD","Md  ","Type","glwS","GrdF","GlwT","strokeStyleLineCapType","strokeStyleLineJoinType","strokeStyleLineAlignment","strokeStyleBlendMode","PntT","Styl"],bool:["PstS","printSixteenBit","masterFXSwitch","enab","uglg","antialiasGloss","useShape","useTexture","masterFXSwitch","uglg","antialiasGloss","useShape","useTexture","Algn","Rvrs","Dthr","Invr","VctC","ShTr","layerConceals","strokeEnabled","fillEnabled","strokeStyleScaleLock","strokeStyleStrokeAdjust"],doub:["warpValue","warpPerspective","warpPerspectiveOther","Intr","Rd  ","Grn ","Bl  ","strokeStyleMiterLimit","strokeStyleResolution"],UntF:["Scl ","sdwO","hglO","lagl","Lald","srgR","blur","Sftn","Opct","Dstn","Angl","Ckmt","Nose","Inpr","ShdN","strokeStyleLineWidth","strokeStyleLineDashOffset","strokeStyleOpacity","Sz  "],VlLs:["Crv ","Clrs","Mnm ","Mxm ","Trns","pathList","strokeStyleLineDashSet"]},rt={"Mnm ":"long","Mxm ":"long",strokeStyleLineDashSet:"UntF"},pe={};for(var ie=0,Fe=Object.keys(xe);ie<Fe.length;ie++)for(var Me=Fe[ie],re=0,Ae=xe[Me];re<Ae.length;re++){var Tn=Ae[re];pe[Tn]=Me}for(var oe=0,De=Object.keys(tt);oe<De.length;oe++){var Tn=De[oe];pe[Tn]="Objc"}for(var ae=0,Pe=Object.keys(it);ae<Pe.length;ae++){var Tn=Pe[ae];rt[Tn]="Objc"}function Ht(n,e){return n==="AntA"?typeof e=="string"?"enum":"bool":n==="Hrzn"||n==="Vrtc"?typeof e=="number"?"doub":"UntF":pe[n]}function gn(n){var e=A(n),t=e===0?O(n):Pt(n,e);return t}function Qn(n,e){if(e.length===4&&e!=="warp")Sn(n,0),F(n,e);else{Sn(n,e.length);for(var t=0;t<e.length;t++)C(n,e.charCodeAt(t))}}function ot(n){Fn(n);for(var e=g(n),t={},i=0;i<e;i++){var r=gn(n),o=O(n),l=lt(n,o);t[r]=l}return t}function at(n,e,t,i){t||console.log("Missing classId for: ",e,t,i),be(n,e),Qn(n,t);var r=Object.keys(i);y(n,r.length);for(var o=0,l=r;o<l.length;o++){var a=l[o],s=Ht(a,i[a]);Qn(n,a),F(n,s||"long");var u=tt[a];a==="strokeStyleContent"&&(i[a]["Clr "]?u={name:"",classID:"solidColorLayer"}:i[a].Grad?u={name:"",classID:"gradientLayer"}:i[a].Ptrn?u={name:"",classID:"patternLayer"}:console.log("Invalid strokeStyleContent value",i[a])),st(n,s||"long",i[a],a,u),s||console.log("Missing descriptor field type for: '"+a+"' in",i)}}function lt(n,e){switch(e){case"obj ":return Wt(n);case"Objc":case"GlbO":return ot(n);case"VlLs":{for(var t=A(n),i=[],r=0;r<t;r++){var o=O(n);i.push(lt(n,o))}return i}case"doub":return V(n);case"UntF":{var l=O(n),a=V(n);if(!En[l])throw new Error("Invalid units: "+l);return{units:En[l],value:a}}case"UnFl":{var l=O(n),a=ln(n);if(!En[l])throw new Error("Invalid units: "+l);return{units:En[l],value:a}}case"TEXT":return yn(n);case"enum":{var s=gn(n),a=gn(n);return s+"."+a}case"long":return A(n);case"comp":{var u=g(n),f=g(n);return{low:u,high:f}}case"bool":return!!k(n);case"type":case"GlbC":return Fn(n);case"alis":{var p=A(n);return Pt(n,p)}case"tdta":{var h=A(n);return on(n,h)}case"ObAr":throw new Error("not implemented: ObAr");case"Pth ":{A(n);var d=O(n);Ye(n);var v=Ye(n),S=Dt(n,v);return{sig:d,path:S}}default:throw new Error("Invalid TySh descriptor OSType: "+e+" at "+n.offset.toString(16))}}function st(n,e,t,i,r){switch(e){case"Objc":case"GlbO":if(!r)throw new Error("Missing ext type for: "+i+" ("+JSON.stringify(t)+")");at(n,r.name,r.classID,t);break;case"VlLs":Sn(n,t.length);for(var o=0;o<t.length;o++){var l=rt[i];F(n,l||"long"),st(n,l||"long",t[o],"",it[i]),l||console.log("Missing descriptor array type for: '"+i+"' in",t)}break;case"doub":Pn(n,t);break;case"UntF":if(!Hn[t.units])throw new Error("Invalid units: "+t.units);F(n,Hn[t.units]),Pn(n,t.value);break;case"UnFl":if(!Hn[t.units])throw new Error("Invalid units: "+t.units);F(n,Hn[t.units]),sn(n,t.value);break;case"TEXT":be(n,t);break;case"enum":{var a=t.split("."),s=a[0],u=a[1];Qn(n,s),Qn(n,u);break}case"long":Sn(n,t);break;case"bool":C(n,t?1:0);break;case"tdta":Sn(n,t.byteLength),Un(n,t);break;default:throw new Error("Not implemented TySh descriptor OSType: "+e)}}function Wt(n){for(var e=A(n),t=[],i=0;i<e;i++){var r=O(n);switch(r){case"prop":{var o=Fn(n),l=o.name,a=o.classID,s=gn(n);t.push({name:l,classID:a,keyID:s});break}case"Clss":t.push(Fn(n));break;case"Enmr":{var u=Fn(n),f=u.name,a=u.classID,p=gn(n),h=gn(n);t.push({name:f,classID:a,TypeID:p,value:h});break}case"rele":{var d=Fn(n),v=d.name,a=d.classID,h=g(n);t.push({name:v,classID:a,value:h});break}case"Idnt":t.push(A(n));break;case"indx":t.push(A(n));break;case"name":t.push(yn(n));break;default:throw new Error("Invalid TySh descriptor Reference type: "+r)}}return t}function Fn(n){var e=yn(n),t=gn(n);return{name:e,classID:t}}function tn(n){var e=g(n);if(e!==16)throw new Error("Invalid descriptor version");return ot(n)}function rn(n,e,t,i){y(n,16),at(n,e,t,i)}function Le(n){return n===32||n===10||n===13||n===9}function Ee(n){return n>=48&&n<=57||n==46||n==45}function Jt(n){var e=0;function t(){for(;e<n.length&&Le(n[e]);)e++}function i(){var m="";if(n[e]==41)return e++,m;if(n[e]!=254||n[e+1]!=255)throw new Error("Invalid utf-16 BOM");e+=2;for(var c=e;e<n.length&&n[e]!==41;){var b=n[e],M=n[e+1];e===c&&b==32&&M===92?m+=" ":M|=b<<8,e+=2,M===92?(m+=String.fromCharCode(n[e]),e++):m+=String.fromCharCode(M)}return e++,m}var r=null,o=[];function l(m){o.length?(a(m),o.push(m)):(o.push(m),r=m)}function a(m){if(!o.length)throw new Error("Invalid data");var c=o[o.length-1];if(typeof c=="string")o[o.length-2][c]=m,u();else if(Array.isArray(c))c.push(m);else throw new Error("Invalid data")}function s(m){o.length||l({});var c=o[o.length-1];if(c&&typeof c=="string")a(m==="nil"?null:"/"+m);else if(c&&typeof c=="object")o.push(m);else throw new Error("Invalid data")}function u(){if(!o.length)throw new Error("Invalid data");o.pop()}for(t();e<n.length;){var f=e,p=n[f];if(p===60&&n[f+1]===60)e+=2,l({});else if(p===62&&n[f+1]===62)e+=2,u();else if(p===47){e+=1;for(var h=e;e<n.length&&!Le(n[e]);)e++;for(var d="",v=h;v<e;v++)d+=String.fromCharCode(n[v]);s(d)}else if(p===40)e+=1,a(i());else if(p===91)e+=1,l([]);else if(p===93)e+=1,u();else if(p===110&&n[f+1]===117&&n[f+2]===108&&n[f+3]===108)e+=4,a(null);else if(p===116&&n[f+1]===114&&n[f+2]===117&&n[f+3]===101)e+=4,a(!0);else if(p===102&&n[f+1]===97&&n[f+2]===108&&n[f+3]===115&&n[f+4]===101)e+=5,a(!1);else if(Ee(p)){for(var S="";e<n.length&&Ee(n[e]);)S+=String.fromCharCode(n[e]),e++;a(parseFloat(S))}else e+=1,console.log("Invalid token "+String.fromCharCode(p)+" at "+e);t()}return r}var Kt=["Axis","XY","Zone","WordSpacing","FirstLineIndent","GlyphSpacing","StartIndent","EndIndent","SpaceBefore","SpaceAfter","LetterSpacing","Values","GridSize","GridLeading","PointBase","TransformPoint0","TransformPoint1","TransformPoint2","FontSize","Leading","HorizontalScale","VerticalScale","BaselineShift","Tsume","OutlineWidth"],$t=["RunLengthArray"];function qt(n,e){e===void 0&&(e=!1);var t=new Uint8Array(1024),i=0,r=0;function o(c){if(i>=t.length){var b=new Uint8Array(t.length*2);b.set(t),t=b}t[i]=c,i++}function l(c){for(var b=0;b<c.length;b++)o(c.charCodeAt(b))}function a(){if(e)l(" ");else for(var c=0;c<r;c++)l("	")}function s(c,b){a(),l("/"+c),d(b,c,!0),e||l(`
`)}function u(c){return c.toString()}function f(c){return c.toFixed(5).replace(/(\d)0+$/g,"$1").replace(/^0+\.([1-9])/g,".$1").replace(/^-0+\.0(\d)/g,"-.0$1")}function p(c,b){var M=b&&Kt.indexOf(b)!==-1||(c|0)!==c;return M?f(c):u(c)}function h(c){var b=Object.keys(c);return b.indexOf("98")!==-1&&b.unshift.apply(b,b.splice(b.indexOf("99"),1)),b.indexOf("99")!==-1&&b.unshift.apply(b,b.splice(b.indexOf("99"),1)),b}function d(c,b,M){M===void 0&&(M=!1);function P(){M?l(" "):a()}if(c===null)P(),l(e?"/nil":"null");else if(typeof c=="number")P(),l(p(c,b));else if(typeof c=="boolean")P(),l(c?"true":"false");else if(typeof c=="string")if(P(),(b==="99"||b==="98")&&c.charAt(0)==="/")l(c);else{l("("),o(254),o(255);for(var Z=0,J=0;J<c.length;J++){var j=c.charCodeAt(J);j===40||j===41?(o(Z),o(92),o(j),Z=0):j===32&&(c.charCodeAt(J+1)===40||c.charCodeAt(J+1)===41)?Z=32:(o(j>>8&255),o(j&255))}l(")")}else if(Array.isArray(c))if(P(),c.every(function(Nn){return typeof Nn=="number"})){l("[");for(var fn=$t.indexOf(b)!==-1,Y=0,cn=c;Y<cn.length;Y++){var Q=cn[Y];l(" "),l(fn?p(Q):f(Q))}l(" ]")}else{l("["),e||l(`
`);for(var X=0,hn=c;X<hn.length;X++){var Q=hn[X];d(Q,b),e||l(`
`)}a(),l("]")}else if(typeof c=="object"){M&&!e&&l(`
`),a(),l("<<"),e||l(`
`),r++;for(var vn=0,dn=h(c);vn<dn.length;vn++){var Ln=dn[vn];s(Ln,c[Ln])}r--,a(),l(">>")}}if(e){if(typeof n=="object")for(var v=0,S=h(n);v<S.length;v++){var m=S[v];s(m,n[m])}}else l(`

`),d(n);return t.slice(0,i)}var T=function(){return T=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},T.apply(this,arguments)},ut={name:"MyriadPro-Regular",script:0,type:0,synthetic:0},Re={justification:"left",firstLineIndent:0,startIndent:0,endIndent:0,spaceBefore:0,spaceAfter:0,autoHyphenate:!0,hyphenatedWordSize:6,preHyphen:2,postHyphen:2,consecutiveHyphens:8,zone:36,wordSpacing:[.8,1,1.33],letterSpacing:[0,0,0],glyphSpacing:[1,1,1],autoLeading:1.2,leadingType:0,hanging:!1,burasagari:!1,kinsokuOrder:0,everyLineComposer:!1},Zt={font:ut,fontSize:12,fauxBold:!1,fauxItalic:!1,autoLeading:!0,leading:0,horizontalScale:1,verticalScale:1,tracking:0,autoKerning:!0,kerning:0,baselineShift:0,fontCaps:0,fontBaseline:0,underline:!1,strikethrough:!1,ligatures:!0,dLigatures:!1,baselineDirection:2,tsume:0,styleRunAlignment:2,language:0,noBreak:!1,fillColor:[0,0,0,255],strokeColor:[0,0,0,255],fillFlag:!0,strokeFlag:!1,fillFirst:!0,yUnderline:1,outlineWidth:1,characterDirection:0,hindiNumbers:!1,kashida:1,diacriticPos:2},Yt={isOn:!1,show:!1,size:18,leading:22,color:[0,0,255,0],leadingFillColor:[0,0,255,0],alignLineHeightToGridFlags:!1},ge=["justification","firstLineIndent","startIndent","endIndent","spaceBefore","spaceAfter","autoHyphenate","hyphenatedWordSize","preHyphen","postHyphen","consecutiveHyphens","zone","wordSpacing","letterSpacing","glyphSpacing","autoLeading","leadingType","hanging","burasagari","kinsokuOrder","everyLineComposer"],Se=["font","fontSize","fauxBold","fauxItalic","autoLeading","leading","horizontalScale","verticalScale","tracking","autoKerning","kerning","baselineShift","fontCaps","fontBaseline","underline","strikethrough","ligatures","dLigatures","baselineDirection","tsume","styleRunAlignment","language","noBreak","fillColor","strokeColor","fillFlag","strokeFlag","fillFirst","yUnderline","outlineWidth","characterDirection","hindiNumbers","kashida","diacriticPos"],ft=["none","crisp","strong","smooth","sharp"],ct=["left","right","center"];function ht(n){return n.substr(0,1).toUpperCase()+n.substr(1)}function Qt(n){var e=n.Values;return n.Type===0?[e[1]*255,e[1]*255,e[1]*255,e[0]*255]:[e[1]*255,e[2]*255,e[3]*255,e[0]*255]}function se(n){return[n[3]/255,n[0]/255,n[1]/255,n[2]/255]}function Ge(n,e){if(!n||!e||n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function _t(n,e){for(var t=0;t<n.length;t++)if(n[t].name===e.name)return t;return n.push(e),n.length-1}function vt(n,e,t){for(var i={},r=0,o=e;r<o.length;r++){var l=o[r],a=ht(l);n[a]!==void 0&&(l==="justification"?i[l]=ct[n[a]]:l==="font"?i[l]=t[n[a]]:l==="fillColor"||l==="strokeColor"?i[l]=Qt(n[a]):i[l]=n[a])}return i}function dt(n,e,t){for(var i,r={},o=0,l=e;o<l.length;o++){var a=l[o],s=ht(a);n[a]!==void 0&&(a==="justification"?r[s]=ct.indexOf((i=n[a],i??"left")):a==="font"?r[s]=_t(t,n[a]):a==="fillColor"||a==="strokeColor"?r[s]={Type:1,Values:se(n[a])}:r[s]=n[a])}return r}function ni(n,e){return vt(n,ge,e)}function ei(n,e){return vt(n,Se,e)}function Oe(n,e){return dt(n,ge,e)}function Te(n,e){return dt(n,Se,e)}function Be(n,e,t){if(e.length){for(var i=function(a){var s=e[0].style[a];if(s!==void 0){var u=Array.isArray(s)?e.every(function(S){return Ge(S.style[a],s)}):e.every(function(S){return S.style[a]===s});u&&(n[a]=s)}var f=n[a];if(f!==void 0)for(var p=0,h=e;p<h.length;p++){var d=h[p],v=Array.isArray(f)?Ge(d.style[a],f):d.style[a]===f;v&&delete d.style[a]}},r=0,o=t;r<o.length;r++){var l=o[r];i(l)}e.every(function(a){return Object.keys(a.style).length===0})&&(e.length=0)}}function ti(n){var e,t=n.EngineDict,i=n.ResourceDict,r=i.FontSet.map(function(d){return{name:d.Name,script:d.Script,type:d.FontType,synthetic:d.Synthetic}}),o={text:t.Editor.Text.replace(/\r/g,`
`).replace(/\n$/,""),antiAlias:(e=ft[t.AntiAlias],e??"smooth"),useFractionalGlyphWidths:!!t.UseFractionalGlyphWidths,superscriptSize:i.SuperscriptSize,superscriptPosition:i.SuperscriptPosition,subscriptSize:i.SubscriptSize,subscriptPosition:i.SubscriptPosition,smallCapSize:i.SmallCapSize},l=n.EngineDict.ParagraphRun;o.paragraphStyle={},o.paragraphStyleRuns=[];for(var a=0;a<l.RunArray.length;a++){var s=l.RunArray[a],u=l.RunLengthArray[a],f=ni(s.ParagraphSheet.Properties,r);o.paragraphStyleRuns.push({length:u,style:f})}Be(o.paragraphStyle,o.paragraphStyleRuns,ge),o.paragraphStyleRuns.length||delete o.paragraphStyleRuns;var p=n.EngineDict.StyleRun;o.style={},o.styleRuns=[];for(var a=0;a<p.RunArray.length;a++){var h=p.RunLengthArray[a],f=ei(p.RunArray[a].StyleSheet.StyleSheetData,r);o.styleRuns.push({length:h,style:f})}return Be(o.style,o.styleRuns,Se),o.styleRuns.length||delete o.styleRuns,o}function ii(n){var e,t,i,r,o,l,a,s,u,f,p,h,d,v,S,m,c,b,M=(e=n.text,e??"").replace(/\r?\n/g,"\r")+"\r",P=[{name:"AdobeInvisFont",script:0,type:0,synthetic:0}],Z=((t=n.style)===null||t===void 0?void 0:t.font)||((r=(i=n.styleRuns)===null||i===void 0?void 0:i.find(function(mn){return mn.style.font}))===null||r===void 0?void 0:r.style.font)||ut,J=Oe(T(T({},Re),n.paragraphStyle),P),j=[],fn=[];if(!((o=n.paragraphStyleRuns)===null||o===void 0)&&o.length)for(var Y=0,cn=n.paragraphStyleRuns;Y<cn.length;Y++){var Q=cn[Y];fn.push(Q.length),j.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Oe(T(T(T({},Re),n.paragraphStyle),Q.style),P)},Adjustments:{Axis:[1,0,1],XY:[0,0]}})}else for(var X=0,hn=0;X<M.length;X++)M.charCodeAt(X)===13&&(fn.push(X-hn+1),j.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:J},Adjustments:{Axis:[1,0,1],XY:[0,0]}}),hn=X+1);for(var vn=Te(T(T({},Zt),{font:Z}),P),dn=(l=n.styleRuns,l??[{length:M.length,style:(a=n.style,a??{})}]),Ln=[],Nn=[],te=0,me=dn;te<me.length;te++){var ke=me[te];Nn.push(ke.length),Ln.push({StyleSheet:{StyleSheetData:Te(T(T({kerning:0,autoKerning:!0,fillColor:[0,0,0,255]},n.style),ke.style),P)}})}var pn=T(T({},Yt),n.gridInfo),Ie=n.orientation==="vertical"?2:0,zt=n.orientation==="vertical"?1:0,Ce={KinsokuSet:[{Name:"PhotoshopKinsokuHard",NoStart:"、。，．・：；？！ー―’”）〕］｝〉》」』】ヽヾゝゞ々ぁぃぅぇぉっゃゅょゎァィゥェォッャュョヮヵヶ゛゜?!)]},.:;℃℉¢％‰",NoEnd:"‘“（〔［｛〈《「『【([{￥＄£＠§〒＃",Keep:"―‥",Hanging:"、。.,"},{Name:"PhotoshopKinsokuSoft",NoStart:"、。，．・：；？！’”）〕］｝〉》」』】ヽヾゝゞ々",NoEnd:"‘“（〔［｛〈《「『【",Keep:"―‥",Hanging:"、。.,"}],MojiKumiSet:[{InternalName:"Photoshop6MojiKumiSet1"},{InternalName:"Photoshop6MojiKumiSet2"},{InternalName:"Photoshop6MojiKumiSet3"},{InternalName:"Photoshop6MojiKumiSet4"}],TheNormalStyleSheet:0,TheNormalParagraphSheet:0,ParagraphSheetSet:[{Name:"Normal RGB",DefaultStyleSheet:0,Properties:J}],StyleSheetSet:[{Name:"Normal RGB",StyleSheetData:vn}],FontSet:P.map(function(mn){var Vn,jn,Xn;return{Name:mn.name,Script:(Vn=mn.script,Vn??0),FontType:(jn=mn.type,jn??0),Synthetic:(Xn=mn.synthetic,Xn??0)}}),SuperscriptSize:(s=n.superscriptSize,s??.583),SuperscriptPosition:(u=n.superscriptPosition,u??.333),SubscriptSize:(f=n.subscriptSize,f??.583),SubscriptPosition:(p=n.subscriptPosition,p??.333),SmallCapSize:(h=n.smallCapSize,h??.7)},Ut={EngineDict:{Editor:{Text:M},ParagraphRun:{DefaultRunData:{ParagraphSheet:{DefaultStyleSheet:0,Properties:{}},Adjustments:{Axis:[1,0,1],XY:[0,0]}},RunArray:j,RunLengthArray:fn,IsJoinable:1},StyleRun:{DefaultRunData:{StyleSheet:{StyleSheetData:{}}},RunArray:Ln,RunLengthArray:Nn,IsJoinable:2},GridInfo:{GridIsOn:!!pn.isOn,ShowGrid:!!pn.show,GridSize:(d=pn.size,d??18),GridLeading:(v=pn.leading,v??22),GridColor:{Type:1,Values:se((S=pn.color,S??[0,0,0,0]))},GridLeadingFillColor:{Type:1,Values:se((m=pn.color,m??[0,0,0,0]))},AlignLineHeightToGridFlags:!!pn.alignLineHeightToGridFlags},AntiAlias:ft.indexOf((c=n.antiAlias,c??"sharp")),UseFractionalGlyphWidths:(b=n.useFractionalGlyphWidths,b??!0),Rendered:{Version:1,Shapes:{WritingDirection:Ie,Children:[{ShapeType:0,Procession:zt,Lines:{WritingDirection:Ie,Children:[]},Cookie:{Photoshop:{ShapeType:0,PointBase:[0,0],Base:{ShapeType:0,TransformPoint0:[1,0],TransformPoint1:[0,1],TransformPoint2:[0,0]}}}}]}}},ResourceDict:T({},Ce),DocumentResources:T({},Ce)};return Ut}var en=function(){return en=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},en.apply(this,arguments)},_n={};function D(n,e,t,i){var r={key:n,has:e,read:t,write:i};_n[r.key]=r}function ri(n,e){_n[n]=_n[e]}function oi(n){var e={};return Object.keys(n).forEach(function(t){return e[n[t]]=t}),e}function G(n,e,t){var i=oi(t),r=function(l){return i[l.split(".")[1]]||e},o=function(l){return n+"."+(t[l]||t[e])};return{decode:r,encode:o}}var ze=G("textGridding","none",{none:"None"}),Wn=G("Ornt","horizontal",{horizontal:"Hrzn",vertical:"Vrtc"}),Ue=G("Annt","sharp",{none:"Anno",sharp:"antiAliasSharp",crisp:"AnCr",strong:"AnSt",smooth:"AnSm"}),Ne=G("warpStyle","none",{none:"warpNone",arc:"warpArc",arcLower:"warpArcLower",arcUpper:"warpArcUpper",arch:"warpArch",bulge:"warpBulge",shellLower:"warpShellLower",shellUpper:"warpShellUpper",flag:"warpFlag",wave:"warpWave",fish:"warpFish",rise:"warpRise",fisheye:"warpFisheye",inflate:"warpInflate",squeeze:"warpSqueeze",twist:"warpTwist"}),q=G("BlnM","normal",{normal:"Nrml",dissolve:"Dslv",darken:"Drkn",multiply:"Mltp","color burn":"CBrn","linear burn":"linearBurn","darker color":"darkerColor",lighten:"Lghn",screen:"Scrn","color dodge":"CDdg","linear dodge":"linearDodge","lighter color":"lighterColor",overlay:"Ovrl","soft light":"SftL","hard light":"HrdL","vivid light":"vividLight","linear light":"linearLight","pin light":"pinLight","hard mix":"hardMix",difference:"Dfrn",exclusion:"Xclu",subtract:"blendSubtraction",divide:"blendDivide",hue:"H   ",saturation:"Strt",color:"Clr ",luminosity:"Lmns"}),pt=G("BESl","inner bevel",{"inner bevel":"InrB","outer bevel":"OtrB",emboss:"Embs","pillow emboss":"PlEb","stroke emboss":"strokeEmboss"}),gt=G("bvlT","smooth",{smooth:"SfBL","chisel hard":"PrBL","chisel soft":"Slmt"}),St=G("BESs","up",{up:"In  ",down:"Out "}),yt=G("BETE","softer",{softer:"SfBL",precise:"PrBL"}),bt=G("IGSr","edge",{edge:"SrcE",center:"SrcC"}),ee=G("GrdT","linear",{linear:"Lnr ",radial:"Rdl ",angle:"Angl",reflected:"Rflc",diamond:"Dmnd"}),mt=G("ClrS","rgb",{rgb:"RGBC",hsb:"HSBl",lab:"LbCl"}),ne=G("FStl","outside",{outside:"OutF",center:"CtrF",inside:"InsF"}),Ve=G("FrFl","color",{color:"SClr",gradient:"GrFl",pattern:"Ptrn"}),je=G("strokeStyleLineCapType","butt",{butt:"strokeStyleButtCap",round:"strokeStyleRoundCap",square:"strokeStyleSquareCap"}),Xe=G("strokeStyleLineJoinType","miter",{miter:"strokeStyleMiterJoin",round:"strokeStyleRoundJoin",bevel:"strokeStyleBevelJoin"}),He=G("strokeStyleLineAlignment","inside",{inside:"strokeStyleAlignInside",center:"strokeStyleAlignCenter",outside:"strokeStyleAlignOutside"});D("TySh",function(n){return n.text!==void 0},function(n,e,t){var i,r,o,l,a=Dn(n);if(a!==1)throw new Error("Invalid TySh version");var s=[V(n),V(n),V(n),V(n),V(n),V(n)],u=Dn(n);if(u!==50)throw new Error("Invalid TySh text version");var f=tn(n),p=Dn(n);if(p!==1)throw new Error("Invalid TySh warp version");var h=tn(n),d=ln(n),v=ln(n),S=ln(n),m=ln(n);if(e.text={transform:s,left:d,top:v,right:S,bottom:m,text:f["Txt "].replace(/\r/g,`
`),index:(i=f.TextIndex,i??0),gridding:ze.decode(f.textGridding),antiAlias:Ue.decode(f.AntA),orientation:Wn.decode(f.Ornt),warp:{style:Ne.decode(h.warpStyle),value:(r=h.warpValue,r??0),perspective:(o=h.warpPerspective,o??0),perspectiveOther:(l=h.warpPerspectiveOther,l??0),rotate:Wn.decode(h.warpRotate)}},f.EngineData){var c=ti(Jt(f.EngineData));e.text=en(en({},e.text),c)}w(n,t())},function(n,e){var t,i,r,o,l,a,s,u,f,p,h,d,v=e.text,S=(t=v.warp,t??{}),m=(i=v.transform,i??[1,0,0,1,0,0]),c={"Txt ":(r=v.text,r??"").replace(/\r?\n/g,"\r"),textGridding:ze.encode(v.gridding),Ornt:Wn.encode(v.orientation),AntA:Ue.encode(v.antiAlias),TextIndex:(o=v.index,o??0),EngineData:qt(ii(v))},b={warpStyle:Ne.encode(S.style),warpValue:(l=S.value,l??0),warpPerspective:(a=S.perspective,a??0),warpPerspectiveOther:(s=S.perspectiveOther,s??0),warpRotate:Wn.encode(S.rotate)};Zn(n,1);for(var M=0;M<6;M++)Pn(n,(u=m[M],u??0));Zn(n,50),rn(n,"","TxLr",c),Zn(n,1),rn(n,"","warp",b),sn(n,(f=v.left,f??0)),sn(n,(p=v.top,p??0)),sn(n,(h=v.right,h??0)),sn(n,(d=v.bottom,d??0)),$(n,2)});D("SoCo",function(n){return n.vectorFill!==void 0&&n.vectorStroke===void 0&&n.vectorFill.type==="color"},function(n,e){var t=tn(n);e.vectorFill=Bn(t)},function(n,e){var t=zn(e.vectorFill).descriptor;rn(n,"","null",t)});D("GdFl",function(n){return n.vectorFill!==void 0&&n.vectorStroke===void 0&&(n.vectorFill.type==="solid"||n.vectorFill.type==="noise")},function(n,e){var t=tn(n);e.vectorFill=Bn(t)},function(n,e){var t=zn(e.vectorFill).descriptor;rn(n,"","null",t)});D("PtFl",function(n){return n.vectorFill!==void 0&&n.vectorStroke===void 0&&n.vectorFill.type==="pattern"},function(n,e){var t=tn(n);e.vectorFill=Bn(t)},function(n,e){var t=zn(e.vectorFill).descriptor;rn(n,"","null",t)});D("vscg",function(n){return n.vectorFill!==void 0&&n.vectorStroke!==void 0},function(n,e,t){O(n);var i=tn(n);e.vectorFill=Bn(i),w(n,t())},function(n,e){var t=zn(e.vectorFill),i=t.descriptor,r=t.key;F(n,r),rn(n,"","null",i)});function We(n,e,t){var i=W(n)*t,r=W(n)*e,o=W(n)*t,l=W(n)*e,a=W(n)*t,s=W(n)*e;return[r,i,l,o,s,a]}D("vmsk",function(n){return n.vectorMask!==void 0},function(n,e,t,i){var r=i.width,o=i.height,l=g(n);if(l!==3)throw new Error("Invalid vmsk version");e.vectorMask={paths:[]};var a=g(n);e.vectorMask.invert=(a&1)!==0,e.vectorMask.notLink=(a&2)!==0,e.vectorMask.disable=(a&4)!==0;for(var s=e.vectorMask.paths,u=void 0;t()>=26;){var f=I(n);switch(f){case 0:I(n),w(n,22),u={open:!1,knots:[]},s.push(u);break;case 1:case 4:u.knots.push({linked:!0,points:We(n,r,o)});break;case 2:case 5:u.knots.push({linked:!1,points:We(n,r,o)});break;case 3:I(n),w(n,22),u={open:!0,knots:[]},s.push(u);break;case 6:w(n,24);break;case 7:{var p=W(n),h=W(n),d=W(n),v=W(n),S=W(n);w(n,4),e.vectorMask.clipboard={top:p,left:h,bottom:d,right:v,resolution:S};break}case 8:e.vectorMask.fillStartsWithAllPixels=!!I(n),w(n,22);break;default:throw new Error("Invalid vmsk section")}}w(n,t())},function(n,e,t){var i=t.width,r=t.height,o=e.vectorMask,l=(o.invert?1:0)|(o.notLink?2:0)|(o.disable?4:0);y(n,3),y(n,l),x(n,6),$(n,24),o.clipboard&&(x(n,7),H(n,o.clipboard.top),H(n,o.clipboard.left),H(n,o.clipboard.bottom),H(n,o.clipboard.right),H(n,o.clipboard.resolution),$(n,4)),o.fillStartsWithAllPixels!==void 0&&(x(n,8),x(n,o.fillStartsWithAllPixels?1:0),$(n,22));for(var a=0,s=o.paths;a<s.length;a++){var u=s[a];x(n,u.open?3:0),x(n,u.knots.length),x(n,1),x(n,1),$(n,18);for(var f=u.open?4:1,p=u.open?5:2,h=0,d=u.knots;h<d.length;h++){var v=d[h];x(n,v.linked?f:p),H(n,v.points[1]/i),H(n,v.points[0]/r),H(n,v.points[3]/i),H(n,v.points[2]/r),H(n,v.points[5]/i),H(n,v.points[4]/r)}}});ri("vsms","vmsk");D("luni",function(n){return n.name!==void 0},function(n,e,t){e.name=yn(n),w(n,t())},function(n,e){de(n,e.name)});D("lnsr",function(n){return n.nameSource!==void 0},function(n,e){return e.nameSource=O(n)},function(n,e){return F(n,e.nameSource)});D("lyid",function(n){return n.id!==void 0},function(n,e){return e.id=g(n)},function(n,e){return y(n,e.id)});D("clbl",function(n){return n.blendClippendElements!==void 0},function(n,e){e.blendClippendElements=!!k(n),w(n,3)},function(n,e){C(n,e.blendClippendElements?1:0),$(n,3)});D("infx",function(n){return n.blendInteriorElements!==void 0},function(n,e){e.blendInteriorElements=!!k(n),w(n,3)},function(n,e){C(n,e.blendInteriorElements?1:0),$(n,3)});D("knko",function(n){return n.knockout!==void 0},function(n,e){e.knockout=!!k(n),w(n,3)},function(n,e){C(n,e.knockout?1:0),$(n,3)});D("lspf",function(n){return n.protected!==void 0},function(n,e){var t=g(n);e.protected={transparency:(t&1)!==0,composite:(t&2)!==0,position:(t&4)!==0}},function(n,e){var t=(e.protected.transparency?1:0)|(e.protected.composite?2:0)|(e.protected.position?4:0);y(n,t)});D("lclr",function(n){return n.sheetColors!==void 0},function(n,e){e.sheetColors={color1:g(n),color2:g(n)}},function(n,e){y(n,e.sheetColors.color1),y(n,e.sheetColors.color2)});D("shmd",function(n){return n.metadata!==void 0},function(n,e){var t=g(n);e.metadata=[];for(var i=0;i<t;i++){un(n,"8BIM");var r=O(n),o=!!k(n);w(n,3);var l=g(n),a=Ci(on(n,l));e.metadata.push({key:r,copy:o,data:a})}},function(n,e){y(n,e.metadata.length);for(var t=0;t<e.metadata.length;t++){var i=e.metadata[t];F(n,"8BIM"),F(n,i.key),C(n,i.copy?1:0),$(n,3),y(n,i.data.length),Un(n,new Uint8Array(i.data))}});D("sn2P",function(n){return n.usingAlignedRendering!==void 0},function(n,e){return e.usingAlignedRendering=!!g(n)},function(n,e){return y(n,e.usingAlignedRendering?1:0)});D("fxrp",function(n){return n.referencePoint!==void 0},function(n,e){e.referencePoint={x:V(n),y:V(n)}},function(n,e){Pn(n,e.referencePoint.x),Pn(n,e.referencePoint.y)});D("lsct",function(n){return n.sectionDivider!==void 0},function(n,e,t){e.sectionDivider={type:g(n)},t()&&(un(n,"8BIM"),e.sectionDivider.key=O(n)),t()&&(e.sectionDivider.subType=g(n))},function(n,e){y(n,e.sectionDivider.type),e.sectionDivider.key&&(F(n,"8BIM"),F(n,e.sectionDivider.key),e.sectionDivider.subType!==void 0&&y(n,e.sectionDivider.subType))});D("pths",function(n){return n.pathList!==void 0},function(n,e){tn(n),e.pathList=[]},function(n,e){var t={pathList:[]};rn(n,"","pathsDataClass",t)});D("lyvr",function(n){return n.version!==void 0},function(n,e){return e.version=g(n)},function(n,e){return y(n,e.version)});D("lrFX",function(n){return n.effects!==void 0},function(n,e,t){e.effects||(e.effects=Vt(n)),w(n,t())},function(n,e){jt(n,e.effects)});D("Txt2",function(n){return n.engineData!==void 0},function(n,e,t){var i=on(n,t());e.engineData=Yn.fromByteArray(i)},function(n,e){var t=Yn.toByteArray(e.engineData);Un(n,t)});D("FMsk",function(n){return n.filterMask!==void 0},function(n,e){e.filterMask={colorSpace:B(n),opacity:I(n)/255}},function(n,e){var t;z(n,e.filterMask.colorSpace),x(n,Gt((t=e.filterMask.opacity,t??1),0,1)*255)});D("vstk",function(n){return n.vectorStroke!==void 0},function(n,e,t){var i=tn(n);e.vectorStroke={strokeEnabled:i.strokeEnabled,fillEnabled:i.fillEnabled,lineWidth:an(i.strokeStyleLineWidth),lineDashOffset:an(i.strokeStyleLineDashOffset),miterLimit:i.strokeStyleMiterLimit,lineCapType:je.decode(i.strokeStyleLineCapType),lineJoinType:Xe.decode(i.strokeStyleLineJoinType),lineAlignment:He.decode(i.strokeStyleLineAlignment),scaleLock:i.strokeStyleScaleLock,strokeAdjust:i.strokeStyleStrokeAdjust,lineDashSet:i.strokeStyleLineDashSet.map(an),blendMode:q.decode(i.strokeStyleBlendMode),opacity:E(i.strokeStyleOpacity),content:Bn(i.strokeStyleContent),resolution:i.strokeStyleResolution},w(n,t())},function(n,e){var t,i,r,o,l,a,s,u=e.vectorStroke,f={strokeStyleVersion:2,strokeEnabled:!!u.strokeEnabled,fillEnabled:!!u.fillEnabled,strokeStyleLineWidth:(t=u.lineWidth,t??{value:3,units:"Points"}),strokeStyleLineDashOffset:(i=u.lineDashOffset,i??{value:0,units:"Points"}),strokeStyleMiterLimit:(r=u.miterLimit,r??100),strokeStyleLineCapType:je.encode(u.lineCapType),strokeStyleLineJoinType:Xe.encode(u.lineJoinType),strokeStyleLineAlignment:He.encode(u.lineAlignment),strokeStyleScaleLock:!!u.scaleLock,strokeStyleStrokeAdjust:!!u.strokeAdjust,strokeStyleLineDashSet:(o=u.lineDashSet,o??[]),strokeStyleBlendMode:q.encode(u.blendMode),strokeStyleOpacity:R((l=u.opacity,l??1)),strokeStyleContent:zn((a=u.content,a??{type:"color",color:[0,0,0,0]})).descriptor,strokeStyleResolution:(s=u.resolution,s??72)};rn(n,"","strokeStyle",f)});D("lfx2",function(n){return n.effects!==void 0},function(n,e,t){var i=g(n);if(i!==0)throw new Error("Invalid lfx2 version");var r=tn(n);e.effects={},r.masterFXSwitch||(e.effects.disabled=!0),r["Scl "]&&(e.effects.scale=E(r["Scl "])),r.DrSh&&(e.effects.dropShadow=_(r.DrSh)),r.IrSh&&(e.effects.innerShadow=_(r.IrSh)),r.OrGl&&(e.effects.outerGlow=_(r.OrGl)),r.IrGl&&(e.effects.innerGlow=_(r.IrGl)),r.ebbl&&(e.effects.bevel=_(r.ebbl)),r.SoFi&&(e.effects.solidFill=_(r.SoFi)),r.patternFill&&(e.effects.patternOverlay=_(r.patternFill)),r.GrFl&&(e.effects.gradientOverlay=_(r.GrFl)),r.ChFX&&(e.effects.satin=_(r.ChFX)),r.FrFX&&(e.effects.stroke={enabled:!!r.FrFX.enab,position:ne.decode(r.FrFX.Styl),fillType:Ve.decode(r.FrFX.PntT),blendMode:q.decode(r.FrFX["Md  "]),opacity:E(r.FrFX.Opct),size:an(r.FrFX["Sz  "])},r.FrFX["Clr "]&&(e.effects.stroke.color=Mn(r.FrFX["Clr "])),r.FrFX.Grad&&(e.effects.stroke.gradient=Ct(r.FrFX)),r.FrFX.Ptrn&&(e.effects.stroke.pattern=wt(r.FrFX))),w(n,t())},function(n,e){var t,i=e.effects,r={masterFXSwitch:!i.disabled,"Scl ":R((t=i.scale,t??1))};i.dropShadow&&(r.DrSh=nn(i.dropShadow,"dropShadow")),i.innerShadow&&(r.IrSh=nn(i.innerShadow,"innerShadow")),i.outerGlow&&(r.OrGl=nn(i.outerGlow,"outerGlow")),i.innerGlow&&(r.IrGl=nn(i.innerGlow,"innerGlow")),i.bevel&&(r.ebbl=nn(i.bevel,"bevel")),i.solidFill&&(r.SoFi=nn(i.solidFill,"solidFill")),i.patternOverlay&&(r.patternFill=nn(i.patternOverlay,"patternOverlay")),i.gradientOverlay&&(r.GrFl=nn(i.gradientOverlay,"gradientOverlay")),i.satin&&(r.ChFX=nn(i.satin,"satin")),i.stroke&&(r.FrFX={enab:!!i.stroke.enabled,Styl:ne.encode(i.stroke.position),PntT:Ve.encode(i.stroke.fillType),"Md  ":q.encode(i.stroke.blendMode),Opct:R(i.stroke.opacity),"Sz  ":Rn(i.stroke.size,"size")},i.stroke.color&&(r.FrFX["Clr "]=An(i.stroke.color)),i.stroke.gradient&&(r.FrFX=en(en({},r.FrFX),xt(i.stroke.gradient))),i.stroke.pattern&&(r.FrFX=en(en({},r.FrFX),Ft(i.stroke.pattern)))),y(n,0),rn(n,"","null",r)});function kt(n){if(n.GrdF==="GrdF.CstS"){var e=n.Intr||4096;return{type:"solid",name:n["Nm  "],smoothness:n.Intr/4096,colorStops:n.Clrs.map(function(t){return{color:Mn(t["Clr "]),location:t.Lctn/e,midpoint:t.Mdpn/100}}),opacityStops:n.Trns.map(function(t){return{opacity:E(t.Opct),location:t.Lctn/e,midpoint:t.Mdpn/100}})}}else return{type:"noise",name:n["Nm  "],roughness:n.Smth/4096,colorModel:mt.decode(n.ClrS),randomSeed:n.RndS,restrictColors:!!n.VctC,addTransparency:!!n.ShTr,min:n["Mnm "].map(function(t){return t/100}),max:n["Mxm "].map(function(t){return t/100})}}function It(n){var e,t,i,r,o;if(n.type==="solid"){var l=Math.round((e=n.smoothness,(e??1)*4096));return{GrdF:"GrdF.CstS","Nm  ":n.name,Intr:l,Clrs:n.colorStops.map(function(a){var s;return{"Clr ":An(a.color||[0,0,0,0]),Type:"Clry.UsrS",Lctn:Math.round(a.location*l),Mdpn:Math.round((s=a.midpoint,(s??.5)*100))}}),Trns:n.opacityStops.map(function(a){var s;return{Opct:R(a.opacity),Lctn:Math.round(a.location*l),Mdpn:Math.round((s=a.midpoint,(s??.5)*100))}})}}else return{GrdF:"GrdF.ClNs","Nm  ":n.name,ShTr:!!n.addTransparency,VctC:!!n.restrictColors,ClrS:mt.encode(n.colorModel),RndS:(t=n.randomSeed,t??0),Smth:Math.round((i=n.roughness,(i??1)*4096)),"Mnm ":(r=n.min,r??[0,0,0,0]).map(function(a){return a*100}),"Mxm ":(o=n.max,o??[1,1,1,1]).map(function(a){return a*100})}}function Ct(n){var e=kt(n.Grad);return e.style=ee.decode(n.Type),n.Dthr!==void 0&&(e.dither=n.Dthr),n.Rvrs!==void 0&&(e.reverse=n.Rvrs),n.Angl!==void 0&&(e.angle=$n(n.Angl)),n["Scl "]!==void 0&&(e.scale=E(n["Scl "])),n.Algn!==void 0&&(e.align=n.Algn),n.Ofst!==void 0&&(e.offset={x:E(n.Ofst.Hrzn),y:E(n.Ofst.Vrtc)}),e}function wt(n){var e={name:n.Ptrn["Nm  "],id:n.Ptrn.Idnt};return n.Lnkd!==void 0&&(e.linked=n.Lnkd),n.phase!==void 0&&(e.phase={x:n.phase.Hrzn,y:n.phase.Vrtc}),e}function Bn(n){if("Grad"in n)return Ct(n);if("Ptrn"in n)return en({type:"pattern"},wt(n));if("Clr "in n)return{type:"color",color:Mn(n["Clr "])};throw new Error("Invalid vector content")}function xt(n){var e={Grad:It(n),Type:ee.encode(n.style)};return n.dither!==void 0&&(e.Dthr=n.dither),n.reverse!==void 0&&(e.Rvrs=n.reverse),n.angle!==void 0&&(e.Angl=qn(n.angle)),n.scale!==void 0&&(e["Scl "]=R(n.scale)),n.align!==void 0&&(e.Algn=n.align),n.offset&&(e.Ofst={Hrzn:R(n.offset.x),Vrtc:R(n.offset.y)}),e}function Ft(n){var e,t,i={Ptrn:{"Nm  ":(e=n.name,e??""),Idnt:(t=n.id,t??"")}};return n.linked!==void 0&&(i.Lnkd=!!n.linked),n.phase!==void 0&&(i.phase={Hrzn:n.phase.x,Vrtc:n.phase.y}),i}function zn(n){return n.type==="color"?{key:"SoCo",descriptor:{"Clr ":An(n.color)}}:n.type==="pattern"?{key:"PtFl",descriptor:Ft(n)}:{key:"GdFl",descriptor:xt(n)}}function $n(n){if(n===void 0)return 0;if(n.units!=="Angle")throw new Error("Invalid units: "+n.units);return n.value}function E(n){if(n===void 0)return 1;if(n.units!=="Percent")throw new Error("Invalid units: "+n.units);return n.value/100}function an(n){var e=n.units,t=n.value;if(e!=="Pixels"&&e!=="Millimeters"&&e!=="Points"&&e!=="None"&&e!=="Picas"&&e!=="Inches"&&e!=="Centimeters")throw new Error("Invalid units: "+JSON.stringify({units:e,value:t}));return{value:t,units:e}}function qn(n){return{units:"Angle",value:n??0}}function R(n){return{units:"Percent",value:Math.round(Gt(n??0,0,1)*100)}}function Rn(n,e){if(n==null)return{units:"Pixels",value:0};if(typeof n!="object")throw new Error("Invalid value: "+JSON.stringify(n)+" (key: "+e+") (should have value and units)");var t=n.units,i=n.value;if(typeof i!="number")throw new Error("Invalid value in "+JSON.stringify(n)+" (key: "+e+")");if(t!=="Pixels"&&t!=="Millimeters"&&t!=="Points"&&t!=="None"&&t!=="Picas"&&t!=="Inches"&&t!=="Centimeters")throw new Error("Invalid units in "+JSON.stringify(n)+" (key: "+e+")");return{units:t,value:i}}function Mn(n){if("H   "in n)return xi(E(n["H   "]),n.Strt,n.Brgh);if("Rd  "in n)return[n["Rd  "],n["Grn "],n["Bl  "],255];throw new Error("Unsupported color descriptor")}function An(n){return n||(n=[0,0,0,0]),{"Rd  ":n[0]||0,"Grn ":n[1]||0,"Bl  ":n[2]||0}}function _(n){for(var e={},t=0,i=Object.keys(n);t<i.length;t++){var r=i[t],o=n[r];switch(r){case"enab":e.enabled=!!o;break;case"uglg":e.useGlobalLight=!!o;break;case"AntA":e.antialiased=!!o;break;case"Algn":e.align=!!o;break;case"Dthr":e.dither=!!o;break;case"Invr":e.invert=!!o;break;case"Rvrs":e.reverse=!!o;break;case"Clr ":e.color=Mn(o);break;case"hglC":e.highlightColor=Mn(o);break;case"sdwC":e.shadowColor=Mn(o);break;case"Styl":e.position=ne.decode(o);break;case"Md  ":e.blendMode=q.decode(o);break;case"hglM":e.highlightBlendMode=q.decode(o);break;case"sdwM":e.shadowBlendMode=q.decode(o);break;case"bvlS":e.style=pt.decode(o);break;case"bvlD":e.direction=St.decode(o);break;case"bvlT":e.technique=gt.decode(o);break;case"GlwT":e.technique=yt.decode(o);break;case"glwS":e.source=bt.decode(o);break;case"Type":e.type=ee.decode(o);break;case"Opct":e.opacity=E(o);break;case"hglO":e.highlightOpacity=E(o);break;case"sdwO":e.shadowOpacity=E(o);break;case"lagl":e.angle=$n(o);break;case"Angl":e.angle=$n(o);break;case"Lald":e.altitude=$n(o);break;case"Sftn":e.soften=an(o);break;case"srgR":e.strength=E(o);break;case"blur":e.size=an(o);break;case"Nose":e.noise=E(o);break;case"Inpr":e.range=E(o);break;case"Ckmt":e.choke=an(o);break;case"ShdN":e.jitter=E(o);break;case"Dstn":e.distance=an(o);break;case"Scl ":e.scale=E(o);break;case"Ptrn":e.pattern={name:o["Nm  "],id:o.Idnt};break;case"phase":e.phase={x:o.Hrzn,y:o.Vrtc};break;case"Ofst":e.offset={x:E(o.Hrzn),y:E(o.Vrtc)};break;case"MpgS":case"TrnS":e.contour={name:o["Nm  "],curve:o["Crv "].map(function(l){return{x:l.Hrzn,y:l.Vrtc}})};break;case"Grad":e.gradient=kt(o);break;case"useTexture":case"useShape":case"layerConceals":case"antialiasGloss":e[r]=o;break;default:console.log("Invalid effect key: '"+r+"':",o)}}return e}function nn(n,e){for(var t={},i=0,r=Object.keys(n);i<r.length;i++){var o=r[i],l=o,a=n[l];switch(l){case"enabled":t.enab=!!a;break;case"useGlobalLight":t.uglg=!!a;break;case"antialiased":t.AntA=!!a;break;case"align":t.Algn=!!a;break;case"dither":t.Dthr=!!a;break;case"invert":t.Invr=!!a;break;case"reverse":t.Rvrs=!!a;break;case"color":t["Clr "]=An(a);break;case"highlightColor":t.hglC=An(a);break;case"shadowColor":t.sdwC=An(a);break;case"position":t.Styl=ne.encode(a);break;case"blendMode":t["Md  "]=q.encode(a);break;case"highlightBlendMode":t.hglM=q.encode(a);break;case"shadowBlendMode":t.sdwM=q.encode(a);break;case"style":t.bvlS=pt.encode(a);break;case"direction":t.bvlD=St.encode(a);break;case"technique":e==="bevel"?t.bvlT=gt.encode(a):t.GlwT=yt.encode(a);break;case"source":t.glwS=bt.encode(a);break;case"type":t.Type=ee.encode(a);break;case"opacity":t.Opct=R(a);break;case"highlightOpacity":t.hglO=R(a);break;case"shadowOpacity":t.sdwO=R(a);break;case"angle":e==="gradientOverlay"?t.Angl=qn(a):t.lagl=qn(a);break;case"altitude":t.Lald=qn(a);break;case"soften":t.Sftn=Rn(a,l);break;case"strength":t.srgR=R(a);break;case"size":t.blur=Rn(a,l);break;case"noise":t.Nose=R(a);break;case"range":t.Inpr=R(a);break;case"choke":t.Ckmt=Rn(a,l);break;case"jitter":t.ShdN=R(a);break;case"distance":t.Dstn=Rn(a,l);break;case"scale":t["Scl "]=R(a);break;case"pattern":t.Ptrn={"Nm  ":a.name,Idnt:a.id};break;case"phase":t.phase={Hrzn:a.x,Vrtc:a.y};break;case"offset":t.Ofst={Hrzn:R(a.x),Vrtc:R(a.y)};break;case"contour":{t[e==="satin"?"MpgS":"TrnS"]={"Nm  ":a.name,"Crv ":a.curve.map(function(s){return{Hrzn:s.x,Vrtc:s.y}})};break}case"gradient":t.Grad=It(a);break;case"useTexture":case"useShape":case"layerConceals":case"antialiasGloss":t[l]=a;break;default:console.log("Invalid effect key: '"+l+"' value:",a)}}return t}function ue(n){return(n&4294967168)===0?1:(n&4294965248)===0?2:(n&4294901760)===0?3:4}function ai(n){for(var e=0,t=0;t<n.length;t++){var i=n.charCodeAt(t);if(i>=55296&&i<=56319){if(t+1<n.length){var r=n.charCodeAt(t+1);(r&64512)===56320&&(t++,e+=ue(((i&1023)<<10)+(r&1023)+65536))}}else e+=ue(i)}return e}function Je(n,e,t){var i=ue(t);switch(i){case 1:n[e]=t;break;case 2:n[e]=t>>6&31|192,n[e+1]=t&63|128;break;case 3:n[e]=t>>12&15|224,n[e+1]=t>>6&63|128,n[e+2]=t&63|128;break;default:n[e]=t>>18&7|240,n[e+1]=t>>12&63|128,n[e+2]=t>>6&63|128,n[e+3]=t&63|128;break}return i}function li(n,e,t){for(var i=0;i<t.length;i++){var r=t.charCodeAt(i);if(r>=55296&&r<=56319){if(i+1<t.length){var o=t.charCodeAt(i+1);if((o&64512)===56320){i++;var l=((r&1023)<<10)+(o&1023)+65536;e+=Je(n,e,l)}}}else e+=Je(n,e,r)}return e}function si(n){var e=new Uint8Array(ai(n));return li(e,0,n),e}function Cn(n,e){if(e>=n.length)throw Error("Invalid byte index");var t=n[e];if((t&192)===128)return t&63;throw Error("Invalid continuation byte")}function ui(n){for(var e="",t=0;t<n.length;){var i=n[t++],r=void 0;if((i&128)===0)r=i;else if((i&224)===192){var o=Cn(n,t++);if(r=(i&31)<<6|o,r<128)throw Error("Invalid continuation byte")}else if((i&240)===224){var o=Cn(n,t++),l=Cn(n,t++);if(r=(i&15)<<12|o<<6|l,r<2048)throw Error("Invalid continuation byte");if(r>=55296&&r<=57343)throw Error("Lone surrogate U+"+r.toString(16).toUpperCase()+" is not a scalar value")}else if((i&248)===240){var o=Cn(n,t++),l=Cn(n,t++),a=Cn(n,t++);if(r=(i&15)<<18|o<<12|l<<6|a,r<65536||r>1114111)throw Error("Invalid continuation byte")}else throw Error("Invalid UTF-8 detected");r>65535&&(r-=65536,e+=String.fromCharCode(r>>>10&1023|55296),r=56320|r&1023),e+=String.fromCharCode(r)}return e}var Mt={};function L(n,e,t,i){var r={key:n,has:e,read:t,write:i};Mt[r.key]=r}var Jn=[void 0,"PPI","PPCM"],Kn=[void 0,"Inches","Centimeters","Points","Picas","Columns"],Ke="0123456789abcdef";function $e(n){return n<=57?n-48:n-87}function fi(n,e){return $e(n.charCodeAt(e))<<4|$e(n.charCodeAt(e+1))}function ci(n,e){var t=on(n,e);return ui(t)}function hi(n,e){var t=si(e);Un(n,t)}L(1061,function(n){return n.captionDigest!==void 0},function(n,e){for(var t="",i=0;i<16;i++){var r=k(n);t+=Ke[r>>4],t+=Ke[r&15]}e.captionDigest=t},function(n,e){for(var t=0;t<16;t++)C(n,fi(e.captionDigest,t*2))});L(1060,function(n){return n.xmpMetadata!==void 0},function(n,e,t){return e.xmpMetadata=ci(n,t())},function(n,e){return hi(n,e.xmpMetadata)});L(1005,function(n){return n.resolutionInfo!==void 0},function(n,e){var t=U(n),i=I(n),r=I(n),o=U(n),l=I(n),a=I(n);e.resolutionInfo={horizontalResolution:t,horizontalResolutionUnit:Jn[i]||"PPI",widthUnit:Kn[r]||"Inches",verticalResolution:o,verticalResolutionUnit:Jn[l]||"PPI",heightUnit:Kn[a]||"Inches"}},function(n,e){var t=e.resolutionInfo;N(n,t.horizontalResolution||0),x(n,Math.max(1,Jn.indexOf(t.horizontalResolutionUnit))),x(n,Math.max(1,Kn.indexOf(t.widthUnit))),N(n,t.verticalResolution||0),x(n,Math.max(1,Jn.indexOf(t.verticalResolutionUnit))),x(n,Math.max(1,Kn.indexOf(t.heightUnit)))});var qe=["centered","size to fit","user defined"];L(1062,function(n){return n.printScale!==void 0},function(n,e){e.printScale={style:qe[Dn(n)],x:ln(n),y:ln(n),scale:ln(n)}},function(n,e){var t=e.printScale,i=t.style,r=t.x,o=t.y,l=t.scale;Zn(n,Math.max(0,qe.indexOf(i))),sn(n,r||0),sn(n,o||0),sn(n,l||0)});L(1006,function(n){return n.alphaChannelNames!==void 0},function(n,e,t){for(e.alphaChannelNames=[];t();){var i=ye(n,1);e.alphaChannelNames.push(i)}},function(n,e){for(var t=0,i=e.alphaChannelNames;t<i.length;t++){var r=i[t];Fi(n,r,1)}});L(1045,function(n){return n.unicodeAlphaNames!==void 0},function(n,e,t){for(e.unicodeAlphaNames=[];t();)e.unicodeAlphaNames.push(yn(n))},function(n,e){for(var t=0,i=e.unicodeAlphaNames;t<i.length;t++){var r=i[t];be(n,r)}});L(1053,function(n){return n.alphaIdentifiers!==void 0},function(n,e,t){for(e.alphaIdentifiers=[];t()>=4;)e.alphaIdentifiers.push(g(n))},function(n,e){for(var t=0,i=e.alphaIdentifiers;t<i.length;t++){var r=i[t];y(n,r)}});L(1010,function(n){return n.backgroundColor!==void 0},function(n,e){return e.backgroundColor=B(n)},function(n,e){return z(n,e.backgroundColor)});L(1037,function(n){return n.globalAngle!==void 0},function(n,e){return e.globalAngle=g(n)},function(n,e){return y(n,e.globalAngle)});L(1049,function(n){return n.globalAltitude!==void 0},function(n,e){return e.globalAltitude=g(n)},function(n,e){return y(n,e.globalAltitude)});L(1011,function(n){return n.printFlags!==void 0},function(n,e){e.printFlags={labels:!!k(n),cropMarks:!!k(n),colorBars:!!k(n),registrationMarks:!!k(n),negative:!!k(n),flip:!!k(n),interpolate:!!k(n),caption:!!k(n),printFlags:!!k(n)}},function(n,e){var t=e.printFlags;C(n,t.labels?1:0),C(n,t.cropMarks?1:0),C(n,t.colorBars?1:0),C(n,t.registrationMarks?1:0),C(n,t.negative?1:0),C(n,t.flip?1:0),C(n,t.interpolate?1:0),C(n,t.caption?1:0),C(n,t.printFlags?1:0)});L(1024,function(n){return n.layerState!==void 0},function(n,e){return e.layerState=I(n)},function(n,e){return x(n,e.layerState)});L(1026,function(n){return n.layersGroup!==void 0},function(n,e,t){for(e.layersGroup=[];t();)e.layersGroup.push(I(n))},function(n,e){for(var t=0,i=e.layersGroup;t<i.length;t++){var r=i[t];x(n,r)}});L(1072,function(n){return n.layerGroupsEnabledId!==void 0},function(n,e,t){for(e.layerGroupsEnabledId=[];t();)e.layerGroupsEnabledId.push(k(n))},function(n,e){for(var t=0,i=e.layerGroupsEnabledId;t<i.length;t++){var r=i[t];C(n,r)}});L(1069,function(n){return n.layerSelectionIds!==void 0},function(n,e){var t=I(n);for(e.layerSelectionIds=[];t--;)e.layerSelectionIds.push(g(n))},function(n,e){x(n,e.layerSelectionIds.length);for(var t=0,i=e.layerSelectionIds;t<i.length;t++){var r=i[t];y(n,r)}});L(1032,function(n){return n.gridAndGuidesInformation!==void 0},function(n,e){var t=g(n),i=g(n),r=g(n),o=g(n);if(t!==1)throw new Error("Invalid 1032 resource version: "+t);e.gridAndGuidesInformation={grid:{horizontal:i,vertical:r},guides:[]};for(var l=0;l<o;l++)e.gridAndGuidesInformation.guides.push({location:g(n)/32,direction:k(n)?"horizontal":"vertical"})},function(n,e){var t=e.gridAndGuidesInformation,i=t.grid||{horizontal:576,vertical:576},r=t.guides||[];y(n,1),y(n,i.horizontal),y(n,i.vertical),y(n,r.length);for(var o=0,l=r;o<l.length;o++){var a=l[o];y(n,a.location*32),C(n,a.direction==="horizontal"?1:0)}});L(1054,function(n){return n.urlsList!==void 0},function(n,e,t,i){var r=g(n);if(r){if(!i.throwForMissingFeatures)return;throw new Error("Not implemented: URL List")}e.urlsList=[]},function(n,e){if(y(n,e.urlsList.length),e.urlsList.length)throw new Error("Not implemented: URL List")});L(1064,function(n){return n.pixelAspectRatio!==void 0},function(n,e){var t=g(n);if(t>2)throw new Error("Invalid pixelAspectRatio version");e.pixelAspectRatio={aspect:V(n)}},function(n,e){y(n,2),Pn(n,e.pixelAspectRatio.aspect)});L(1044,function(n){return n.idsSeedNumber!==void 0},function(n,e){return e.idsSeedNumber=g(n)},function(n,e){return y(n,e.idsSeedNumber)});L(1036,function(n){return n.thumbnail!==void 0||n.thumbnailRaw!==void 0},function(n,e,t,i){var r=g(n),o=g(n),l=g(n);g(n),g(n),g(n);var a=I(n),s=I(n);if(r!==1||a!==24||s!==1){console.log("Invalid thumbnail data (format: "+r+", bitsPerPixel: "+a+", planes: "+s+")"),w(n,t());return}var u=t(),f=on(n,u);i.useRawThumbnail?e.thumbnailRaw={width:o,height:l,data:f}:e.thumbnail=Tt(f)},function(n,e){var t=0,i=0,r;e.thumbnailRaw?(t=e.thumbnailRaw.width,i=e.thumbnailRaw.height,r=e.thumbnailRaw.data):(t=e.thumbnail.width,i=e.thumbnail.height,r=Yn.toByteArray(e.thumbnail.toDataURL("image/jpeg",1).substr(23)));var o=24,l=Math.floor((t*o+31)/32)*4,a=1,s=l*i*a,u=r.length;y(n,1),y(n,t),y(n,i),y(n,l),y(n,s),y(n,u),x(n,o),x(n,a),Un(n,r)});L(1057,function(n){return n.versionInfo!==void 0},function(n,e,t){var i=g(n);if(i!==1)throw new Error("Invalid versionInfo version");e.versionInfo={hasRealMergedData:!!k(n),writerName:yn(n),readerName:yn(n),fileVersion:g(n)},w(n,t())},function(n,e){var t=e.versionInfo;y(n,1),C(n,t.hasRealMergedData?1:0),de(n,t.writerName),de(n,t.readerName),y(n,t.fileVersion)});var At=[0,1,3];function fe(n){for(var e=n.width*n.height*4,t=0;t<e;t+=4)n.data[t+1]=n.data[t],n.data[t+2]=n.data[t]}function Ze(n,e,t){var i=new DataView(n,e,t);return{view:i,offset:0}}function k(n){return n.offset+=1,n.view.getUint8(n.offset-1)}function vi(n){return n.view.getUint8(n.offset)}function Dn(n){return n.offset+=2,n.view.getInt16(n.offset-2,!1)}function I(n){return n.offset+=2,n.view.getUint16(n.offset-2,!1)}function A(n){return n.offset+=4,n.view.getInt32(n.offset-4,!1)}function Ye(n){return n.offset+=4,n.view.getInt32(n.offset-4,!0)}function g(n){return n.offset+=4,n.view.getUint32(n.offset-4,!1)}function ln(n){return n.offset+=4,n.view.getFloat32(n.offset-4,!1)}function V(n){return n.offset+=8,n.view.getFloat64(n.offset-8,!1)}function U(n){return A(n)/65536}function W(n){return A(n)/(1<<24)}function on(n,e){return n.offset+=e,new Uint8Array(n.view.buffer,n.view.byteOffset+n.offset-e,e)}function O(n){return Lt(n,4)}function ye(n,e){e===void 0&&(e=2);for(var t=k(n),i=Lt(n,t);++t%e;)w(n,1);return i}function yn(n){var e=g(n);return Dt(n,e)}function Dt(n,e){for(var t="";e--;){var i=I(n);(i||e>0)&&(t+=String.fromCharCode(i))}return t}function Pt(n,e){for(var t="";e--;)t+=String.fromCharCode(k(n));return t}function w(n,e){n.offset+=e}function un(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var i=n.offset,r=O(n);if(e.indexOf(r)===-1)throw new Error("Invalid signature: '"+r+"' at 0x"+i.toString(16))}function Lt(n,e){var t=on(n,e);return String.fromCharCode.apply(String,t)}function di(n,e){e===void 0&&(e={}),un(n,"8BPS");var t=I(n);if(t!==1)throw new Error("Invalid PSD file version: "+t);w(n,6);var i=I(n),r=g(n),o=g(n),l=I(n),a=I(n);if(At.indexOf(a)===-1)throw new Error("Color mode not supported: "+a);var s={width:o,height:r,channels:i,bitsPerChannel:l,colorMode:a};K(n,1,function(h){if(e.throwForMissingFeatures)throw new Error("Not Implemented: color mode data");w(n,h())}),K(n,1,function(h){for(var d=function(){un(n,"8BIM");var v=I(n);ye(n),K(n,2,function(S){var m=Mt[v],c=v===1036&&!!e.skipThumbnail;s.imageResources||(s.imageResources={}),m&&!c?m.read(n,s.imageResources,S,e):w(n,S())})};h();)d()});var u=!1;K(n,1,function(h){for(u=pi(n,s,e),h()>0?mi(n):w(n,h());h()>0;){for(;h()&&vi(n)===0;)w(n,1);h()>=12?Et(n,s,s,!!e.logMissingFeatures):w(n,h())}});var f=s.children&&s.children.length,p=e.skipCompositeImageData&&(e.skipLayerImageData||f);return p||ki(n,s,u,e),s}function pi(n,e,t){var i=!1;return K(n,2,function(r){var o=Dn(n);o<0&&(i=!0,o=-o);for(var l=[],a=[],s=0;s<o;s++){var u=gi(n,e,t),f=u.layer,p=u.channels;l.push(f),a.push(p)}if(!t.skipLayerImageData)for(var s=0;s<o;s++)bi(n,e,l[s],a[s],t);w(n,r()),e.children||(e.children=[]);for(var h=[e],s=l.length-1;s>=0;s--){var d=l[s],v=d.sectionDivider?d.sectionDivider.type:0;v===1||v===2?(d.opened=v===1,d.children=[],h[h.length-1].children.unshift(d),h.push(d)):v===3?h.pop():h[h.length-1].children.unshift(d)}}),i}function gi(n,e,t){var i={};i.top=A(n),i.left=A(n),i.bottom=A(n),i.right=A(n);for(var r=I(n),o=[],l=0;l<r;l++){var a=Dn(n),s=A(n);o.push({id:a,length:s})}un(n,"8BIM");var u=O(n);if(!Gn[u])throw new Error("Invalid blend mode: '"+u+"'");i.blendMode=Gn[u],i.opacity=k(n)/255,i.clipping=k(n)===1;var f=k(n);return i.transparencyProtected=(f&1)!==0,i.hidden=(f&2)!==0,w(n,1),K(n,1,function(p){var h=Si(n);for(h&&(i.mask=h),yi(n),i.name=ye(n,4);p();)Et(n,i,e,!!t.logMissingFeatures)}),{layer:i,channels:o}}function Si(n){return K(n,1,function(e){if(e()){var t={};t.top=A(n),t.left=A(n),t.bottom=A(n),t.right=A(n),t.defaultColor=k(n);var i=k(n);if(t.positionRelativeToLayer=(i&1)!==0,t.disabled=(i&2)!==0,i&16){var r=k(n);r&1&&(t.userMaskDensity=k(n)),r&2&&(t.userMaskFeather=V(n)),r&4&&(t.vectorMaskDensity=k(n)),r&8&&(t.vectorMaskFeather=V(n))}return e()>2&&(k(n),k(n),A(n),A(n),A(n),A(n)),w(n,e()),t}else return})}function yi(n){return K(n,1,function(e){for(var t=g(n),i=g(n),r=[];e();){var o=g(n),l=g(n);r.push({sourceRange:o,destRange:l})}return{compositeGrayBlendSource:t,compositeGraphBlendDestinationRange:i,ranges:r}})}function bi(n,e,t,i,r){var o=(t.right||0)-(t.left||0),l=(t.bottom||0)-(t.top||0),a;o&&l&&(a=ve(o,l),ce(a));for(var s=0,u=i;s<u.length;s++){var f=u[s],p=I(n);if(f.id===-2){var h=t.mask;if(!h)throw new Error("Missing layer mask data");var d=(h.right||0)-(h.left||0),v=(h.bottom||0)-(h.top||0);if(d&&v){var S=ve(d,v);ce(S),Qe(n,S,p,d,v,0),fe(S),r.useImageData?h.imageData=S:(h.canvas=On(d,v),h.canvas.getContext("2d").putImageData(S,0,0))}}else{var m=Ii(f.id),c=a;if(m<0&&(c=void 0,r.throwForMissingFeatures))throw new Error("Channel not supported: "+f.id);Qe(n,c,p,o,l,m),c&&e.colorMode===1&&fe(c)}}a&&(r.useImageData?t.imageData=a:(t.canvas=On(o,l),t.canvas.getContext("2d").putImageData(a,0,0)))}function Qe(n,e,t,i,r,o){if(t===0)Ot(n,e,o,i,r);else if(t===1)he(n,e,i,r,4,[o]);else throw new Error("Compression type not supported: "+t)}function mi(n){return K(n,1,function(e){if(e()){var t=I(n),i=I(n),r=I(n),o=I(n),l=I(n),a=I(n)/255,s=k(n);return w(n,e()),{overlayColorSpace:t,colorSpace1:i,colorSpace2:r,colorSpace3:o,colorSpace4:l,opacity:a,kind:s}}})}function Et(n,e,t,i){un(n,"8BIM","8B64");var r=O(n);K(n,2,function(o){var l=_n[r];l?l.read(n,e,o,t):(i&&console.log("Unhandled additional info: "+r),w(n,o())),o()&&(i&&console.log("Unread "+o()+" bytes left for tag: "+r),w(n,o()))})}function ki(n,e,t,i){var r=I(n);if(At.indexOf(e.colorMode)===-1)throw new Error("Color mode not supported: "+e.colorMode);if(r!==0&&r!==1)throw new Error("Compression type not supported: "+r);var o=ve(e.width,e.height);if(ce(o),e.colorMode===0){var l=void 0;if(r===0)l=on(n,Math.ceil(e.width/8)*e.height);else if(r===1)l=new Uint8Array(e.width*e.height),he(n,{data:l,width:e.width,height:e.height},e.width,e.height,1,[0]);else throw new Error("Unsupported compression: "+r);wi(l,o.data,e.width,e.height)}else{var a=e.colorMode===3?[0,1,2]:[0];if(e.channels&&e.channels>3)for(var s=3;s<e.channels;s++)a.push(s);else t&&a.push(3);if(r===0)for(var s=0;s<a.length;s++)Ot(n,o,a[s],e.width,e.height);else r===1&&he(n,o,e.width,e.height,4,a);e.colorMode===1&&fe(o)}i.useImageData?e.imageData=o:(e.canvas=On(e.width,e.height),e.canvas.getContext("2d").putImageData(o,0,0))}function K(n,e,t){var i=A(n);if(!(i<=0)){var r=n.offset+i,o=t(function(){return r-n.offset});if(n.offset>r)throw new Error("Exceeded section limits");if(n.offset!==r)throw new Error("Unread section data: "+(r-n.offset)+" bytes at 0x"+n.offset.toString(16));for(;r%e;)r++;return n.offset=r,o}}var Rt={},Gn={pass:"pass through",norm:"normal",diss:"dissolve",dark:"darken","mul ":"multiply",idiv:"color burn",lbrn:"linear burn",dkCl:"darker color",lite:"lighten",scrn:"screen","div ":"color dodge",lddg:"linear dodge",lgCl:"lighter color",over:"overlay",sLit:"soft light",hLit:"hard light",vLit:"vivid light",lLit:"linear light",pLit:"pin light",hMix:"hard mix",diff:"difference",smud:"exclusion",fsub:"subtract",fdiv:"divide","hue ":"hue","sat ":"saturation",colr:"color","lum ":"luminosity"};Object.keys(Gn).forEach(function(n){return Rt[Gn[n]]=n});var _e;(function(n){n[n.Red=0]="Red",n[n.Green=1]="Green",n[n.Blue=2]="Blue",n[n.Transparency=-1]="Transparency",n[n.UserMask=-2]="UserMask",n[n.RealUserMask=-3]="RealUserMask"})(_e||(_e={}));var nt;(function(n){n[n.RawData=0]="RawData",n[n.RleCompressed=1]="RleCompressed",n[n.ZipWithoutPrediction=2]="ZipWithoutPrediction",n[n.ZipWithPrediction=3]="ZipWithPrediction"})(nt||(nt={}));function Ii(n){switch(n){case 0:return 0;case 1:return 1;case 2:return 2;case-1:return 3;default:return n+1}}function Gt(n,e,t){return n<e?e:n>t?t:n}function Ci(n){for(var e=new Array(n.length),t=0;t<n.length;t++)e[t]=n[t];return e}function B(n){var e=I(n);e!==0&&console.log("Invalid color space");var t=Math.round(I(n)/257),i=Math.round(I(n)/257),r=Math.round(I(n)/257),o=Math.round(I(n)/257);return[t,i,r,o]}function z(n,e){e||(e=[0,0,0,0]),x(n,0),x(n,Math.round(e[0]*257)),x(n,Math.round(e[1]*257)),x(n,Math.round(e[2]*257)),x(n,Math.round(e[3]*257))}function ce(n){for(var e=n.width,t=n.height,i=n.data,r=e*t|0,o=new Uint32Array(i.buffer),l=0;l<r;l=l+1|0)o[l]=4278190080}function wi(n,e,t,i){for(var r=0,o=0,l=0;r<i;r++)for(var a=0;a<t;)for(var s=n[l++],u=0;u<8&&a<t;u++,a++){var f=s&128?0:255;s=s<<1,e[o++]=f,e[o++]=f,e[o++]=f,e[o++]=255}}function Ot(n,e,t,i,r){var o=i*r,l=on(n,o);if(e&&t<4)for(var a=e.data,s=0,u=t|0;s<o;s++,u=u+4|0)a[u]=l[s]}function he(n,e,t,i,r,o){for(var l=new Uint16Array(o.length*i),a=e&&e.data,s=0,u=0;s<o.length;s++)for(var f=0;f<i;f++,u++)l[u]=I(n);for(var p=0,u=0;p<o.length;p++){var h=o[p]|0,d=p>3||h>3;if(!a||d)for(var f=0;f<i;f++,u++)w(n,l[u]);else for(var f=0,v=h|0;f<i;f++,u++)for(var S=l[u],m=on(n,S),c=0;c<S;c++){var b=m[c];if(b>=128){var M=m[++c];b=256-b|0;for(var P=0;P<=b;P=P+1|0)a[v]=M,v=v+r|0}else for(var P=0;P<=b;P=P+1|0)a[v]=m[++c],v=v+r|0;if(c>=S)throw new Error("Invalid RLE data: exceeded buffer size "+c+"/"+S)}}}function xi(n,e,t){n=Math.max(0,Math.min(360,n===360?0:n)),e=Math.max(0,Math.min(1,e/100)),t=Math.max(0,Math.min(1,t/100));var i=t,r=t,o=t;if(e!==0){n/=60;var l=Math.floor(n),a=n-l,s=t*(1-e),u=t*(1-e*a),f=t*(1-e*(1-a));switch(l){case 0:i=t,r=f,o=s;break;case 1:i=u,r=t,o=s;break;case 2:i=s,r=t,o=f;break;case 3:i=s,r=u,o=t;break;case 4:i=f,r=s,o=t;break;default:i=t,r=s,o=u}}return[i*255,r*255,o*255,255]}var On=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvas method")},Tt=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvasFromData method")},le=void 0,ve=function(n,e){return le||(le=On(1,1)),le.getContext("2d").createImageData(n,e)};typeof document<"u"&&(On=function(n,e){var t=document.createElement("canvas");return t.width=n,t.height=e,t},Tt=function(n){var e=new Image;e.src="data:image/jpeg;base64,"+Yn.fromByteArray(n);var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t});function C(n,e){var t=bn(n,1);n.view.setUint8(t,e)}function Zn(n,e){var t=bn(n,2);n.view.setInt16(t,e,!1)}function x(n,e){var t=bn(n,2);n.view.setUint16(t,e,!1)}function Sn(n,e){var t=bn(n,4);n.view.setInt32(t,e,!1)}function y(n,e){var t=bn(n,4);n.view.setUint32(t,e,!1)}function sn(n,e){var t=bn(n,4);n.view.setFloat32(t,e,!1)}function Pn(n,e){var t=bn(n,8);n.view.setFloat64(t,e,!1)}function N(n,e){Sn(n,e*65536)}function H(n,e){Sn(n,e*(1<<24))}function Un(n,e){if(e){Bt(n,n.offset+e.length);var t=new Uint8Array(n.buffer);t.set(e,n.offset),n.offset+=e.length}}function $(n,e){for(var t=0;t<e;t++)C(n,0)}function F(n,e){if(e.length!==4)throw new Error("Invalid signature: '"+e+"'");for(var t=0;t<4;t++)C(n,e.charCodeAt(t))}function Fi(n,e,t){var i=e.length;C(n,i);for(var r=0;r<i;r++){var o=e.charCodeAt(r);C(n,o<128?o:63)}for(;++i%t;)C(n,0)}function de(n,e){y(n,e.length);for(var t=0;t<e.length;t++)x(n,e.charCodeAt(t))}function be(n,e){y(n,e.length+1);for(var t=0;t<e.length;t++)x(n,e.charCodeAt(t));x(n,0)}function Mi(n,e){var t=n.buffer.byteLength;do t*=2;while(e>t);var i=new ArrayBuffer(t),r=new Uint8Array(i),o=new Uint8Array(n.buffer);r.set(o),n.buffer=i,n.view=new DataView(n.buffer)}function Bt(n,e){e>n.buffer.byteLength&&Mi(n,e)}function bn(n,e){var t=n.offset;return Bt(n,n.offset+=e),t}function Di(n,e){var t="buffer"in n?Ze(n.buffer,n.byteOffset,n.byteLength):Ze(n);return di(t,e)}export{Di as readPsd};
