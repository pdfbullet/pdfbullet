import{r as p,u as U,a as M,d as O,j as e,S as B,ab as W,E,a8 as Y,D as F,f as _,ac as H,ad as J,$ as Q,ae as V,m as Z,y as K,P as X,Z as ee,af as se,Q as te,ag as I}from"./main-J66571Qp.js";import q from"./html2canvas.esm-B0tyYwQk.js";import{E as ne}from"./jspdf.es.min-CAHjfVqS.js";import{R as A}from"./RichTextEditor-Blka9kye.js";import"./react-Ckhrjn13.js";const re=[{symbol:"$",code:"USD",name:"US Dollar"},{symbol:"€",code:"EUR",name:"Euro"},{symbol:"£",code:"GBP",name:"British Pound"},{symbol:"¥",code:"JPY",name:"Japanese Yen"},{symbol:"₹",code:"INR",name:"Indian Rupee"},{symbol:"Rs",code:"NPR",name:"Nepalese Rupee"}],ae={title:"Invoice",logo:null,invoiceNo:"00001",invoiceDate:new Date().toISOString().split("T")[0],dueDate:new Date(new Date().setDate(new Date().getDate()+15)).toISOString().split("T")[0],from:{name:"Your Company",address:"123 Your Street, City, Country",email:"your@company.com",phone:"+1 234 567 890",taxId:"PAN/VAT No."},to:{name:"Client Company",address:"456 Client Street, City, Country",email:"client@company.com",phone:"+1 098 765 432",taxId:"Client PAN/VAT No."},shipTo:{name:"Shipping Name",address:"789 Shipping St, City, Country"},showShipping:!1,items:[{id:1,name:"Website Design",description:"Responsive design and development",unit:"Service",quantity:1,rate:500}],notes:"Thank you for your business.",terms:"Payment is due within 15 days.",signature:null,currency:re[0],taxRate:0,discount:0,shipping:0,isPaid:!1,paperSize:"A4"},z=(s,r,o)=>{p.useEffect(()=>{const m=()=>{const g=r.current,h=o.current;if(g&&h&&(h.style.transform="",h.style.transformOrigin="",g.style.height="",s.paperSize==="A4")){const u=g.offsetWidth,a=h.offsetWidth;if(u>0&&a>u){const i=u/a;h.style.transform=`scale(${i})`,h.style.transformOrigin="top left";const c=h.offsetHeight;g.style.height=`${c*i}px`}}};let l;const x=()=>{clearTimeout(l),l=window.setTimeout(m,150)},f=setTimeout(m,50);return window.addEventListener("resize",x),()=>{clearTimeout(f),clearTimeout(l),window.removeEventListener("resize",x)}},[s.paperSize,r,o])},v=(s,r)=>`${r}${s.toFixed(2)}`,b=({value:s,onChange:r,placeholder:o,isTextarea:m,className:l,type:x="text"})=>{const f=m?"textarea":"input";return e.jsx(f,{value:s,onChange:g=>r(g.target.value),placeholder:o,className:`bg-transparent w-full focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-800 rounded p-1 text-sm ${l}`,rows:m?2:void 0,type:x})},G=({data:s,template:r})=>{const o=s.items.reduce((i,c)=>i+c.quantity*c.rate,0),m=o-s.discount,l=m*(s.taxRate/100),x=m+l+s.shipping,f=s.paperSize==="4x6"?"paper-4x6":"paper-a4",g="p-4 sm:p-8 w-full h-full text-xs sm:text-sm relative",h={classic:"bg-white text-gray-800 font-sans",modern:"bg-gray-900 text-white font-serif",minimalist:"bg-white text-gray-600 font-light"},u={classic:"border-b-2 border-gray-300 pb-4",modern:"border-b-2 border-blue-400 pb-4",minimalist:"text-center"},a={classic:"bg-gray-200 text-gray-700",modern:"bg-blue-500 text-white",minimalist:"border-b-2 border-gray-400 font-normal"};return e.jsxs("div",{className:`${g} ${h[r]} ${f}`,children:[s.isPaid&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:e.jsx("div",{className:"text-red-500 border-8 border-red-500 rounded-lg p-4 sm:p-8 text-6xl sm:text-8xl font-black uppercase opacity-20 transform -rotate-15",children:"Paid"})}),e.jsxs("div",{className:`flex justify-between items-start ${u[r]}`,children:[e.jsxs("div",{children:[s.logo&&e.jsx("img",{src:s.logo,alt:"Company Logo",className:"h-12 sm:h-16 w-auto mb-4"}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold",children:s.title})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Invoice #:"})," ",s.invoiceNo]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",s.invoiceDate]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Due Date:"})," ",s.dueDate]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-8 my-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold mb-2",children:"From:"}),e.jsx("p",{className:"font-semibold",children:s.from.name}),e.jsx("p",{className:"whitespace-pre-wrap",children:s.from.address}),e.jsx("p",{children:s.from.email}),e.jsx("p",{children:s.from.phone}),e.jsx("p",{children:s.from.taxId})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold mb-2",children:"To:"}),e.jsx("p",{className:"font-semibold",children:s.to.name}),e.jsx("p",{className:"whitespace-pre-wrap",children:s.to.address}),e.jsx("p",{children:s.to.email}),e.jsx("p",{children:s.to.phone}),e.jsx("p",{children:s.to.taxId})]}),s.showShipping&&e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold mb-2",children:"Ship To:"}),e.jsx("p",{className:"font-semibold",children:s.shipTo.name}),e.jsx("p",{className:"whitespace-pre-wrap",children:s.shipTo.address})]})]}),e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:a[r],children:[e.jsx("th",{className:"p-1 sm:p-2",children:"Item"}),e.jsx("th",{className:"p-1 sm:p-2",children:"Qty"}),e.jsx("th",{className:"p-1 sm:p-2",children:"Rate"}),e.jsx("th",{className:"p-1 sm:p-2 text-right",children:"Amount"})]})}),e.jsx("tbody",{children:s.items.map(i=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("td",{className:"p-1 sm:p-2 align-top",children:[e.jsx("p",{className:"font-semibold",children:i.name}),e.jsx("div",{className:"prose prose-xs max-w-none text-gray-500",dangerouslySetInnerHTML:{__html:i.description}})]}),e.jsxs("td",{className:"p-1 sm:p-2 align-top",children:[i.quantity," ",i.unit]}),e.jsx("td",{className:"p-1 sm:p-2 align-top",children:v(i.rate,s.currency.symbol)}),e.jsx("td",{className:"p-1 sm:p-2 align-top text-right",children:v(i.quantity*i.rate,s.currency.symbol)})]},i.id))})]}),e.jsx("div",{className:"flex justify-end mt-4 sm:mt-8",children:e.jsx("div",{className:"w-full md:w-1/2 lg:w-2/5",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between p-1 sm:p-2",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:v(o,s.currency.symbol)})]}),s.discount>0&&e.jsxs("div",{className:"flex justify-between p-1 sm:p-2",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-",v(s.discount,s.currency.symbol)]})]}),s.taxRate>0&&e.jsxs("div",{className:"flex justify-between p-1 sm:p-2",children:[e.jsxs("span",{children:["Tax (",s.taxRate,"%)"]}),e.jsx("span",{children:v(l,s.currency.symbol)})]}),s.shipping>0&&e.jsxs("div",{className:"flex justify-between p-1 sm:p-2",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{children:v(s.shipping,s.currency.symbol)})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg sm:text-xl p-2 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:v(x,s.currency.symbol)})]})]})})}),e.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-8",children:[s.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Notes"}),e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s.notes}})]}),s.terms&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Terms"}),e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s.terms}})]})]}),s.signature&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"font-bold",children:"Signature"}),e.jsx("img",{src:s.signature,alt:"Signature",className:"h-16 w-auto"})]})]})},ie=({isOpen:s,onClose:r,onAddItems:o})=>{const[m,l]=p.useState(""),[x,f]=p.useState(!1),[g,h]=p.useState(""),u=async()=>{if(m){f(!0),h("");try{const a="AIzaSyCuhbxmzoOTGS6UtX7OZjLwBiMfQNrOzJA",c=await new te({apiKey:a}).models.generateContent({model:"gemini-2.5-flash",contents:`Based on the following description, generate a list of 3-5 typical line items for an invoice. For each item, provide a name, a brief description, a realistic quantity, a rate, and a unit (like 'hrs', 'pcs', 'service').
                Description: "${m}"`,config:{responseMimeType:"application/json",responseSchema:{type:I.OBJECT,properties:{items:{type:I.ARRAY,description:"An array of invoice line items.",items:{type:I.OBJECT,properties:{name:{type:I.STRING},description:{type:I.STRING},quantity:{type:I.NUMBER},rate:{type:I.NUMBER},unit:{type:I.STRING}},required:["name","description","quantity","rate","unit"]}}},required:["items"]}}}),d=JSON.parse(c.text);if(d.items&&Array.isArray(d.items))o(d.items),r();else throw new Error("AI did not return items in the expected format.")}catch(a){h(a.message||"Failed to generate items.")}finally{f(!1)}}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:r,children:e.jsxs("div",{className:"bg-white dark:bg-black w-full max-w-lg rounded-lg shadow-xl",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Generate Items with AI"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Describe the service or products, and AI will suggest line items for your invoice."}),e.jsx("textarea",{value:m,onChange:a=>l(a.target.value),rows:4,placeholder:"e.g., 'Build a small business website with 5 pages and a contact form'",className:"w-full p-2 border rounded-md"}),g&&e.jsx("p",{className:"text-xs text-red-500 mt-2",children:g})]}),e.jsxs("div",{className:"px-6 pb-4 flex justify-end gap-4",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 font-semibold border rounded-md",children:"Cancel"}),e.jsx("button",{onClick:u,disabled:x,className:"px-4 py-2 font-semibold bg-brand-red text-white rounded-md disabled:bg-red-300",children:x?"Generating...":"Generate"})]})]})}):null},oe=({data:s,setData:r})=>{const[o,m]=p.useState(!1),[l,x]=p.useState({}),[f,g]=p.useState(!1),[h,u]=p.useState(!1),a=p.useRef(null);p.useEffect(()=>{o&&a.current?.focus()},[o]);const i=(n,t,j)=>{r($=>({...$,items:$.items.map(T=>T.id===n?{...T,[t]:j}:T)}))},c=()=>r(n=>({...n,items:[...n.items,{id:Date.now(),name:"",description:"",unit:"pcs",quantity:1,rate:0}]})),d=n=>r(t=>({...t,items:t.items.filter(j=>j.id!==n)})),N=n=>{const t=s.items.find(j=>j.id===n);t&&r(j=>({...j,items:[...j.items,{...t,id:Date.now()}]}))},w=n=>x(t=>({...t,[n]:!t[n]})),C=p.useCallback(n=>{if(n.length>0){const t=new FileReader;t.onloadend=()=>{r(j=>({...j,signature:t.result}))},t.readAsDataURL(n[0])}},[r]),{getRootProps:S,getInputProps:y}=Z({onDrop:C,accept:{"image/*":[]}}),k=n=>{const t=n.map(j=>({...j,id:Date.now()+Math.random()}));r(j=>({...j,items:[...j.items,...t]}))},R=s.items.reduce((n,t)=>n+t.quantity*t.rate,0),P=R-s.discount,D=P*(s.taxRate/100),L=P+D+s.shipping;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-black p-4 sm:p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 pb-4 border-b dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[o?e.jsx("input",{ref:a,value:s.title,onChange:n=>r(t=>({...t,title:n.target.value})),onBlur:()=>m(!1),className:"text-3xl font-bold bg-gray-100 dark:bg-gray-800 focus:outline-none p-1 rounded"}):e.jsx("h1",{className:"text-3xl font-bold",children:s.title}),e.jsx("button",{onClick:()=>m(!0),children:e.jsx(E,{className:"h-5 w-5 text-gray-400 hover:text-brand-red"})})]}),e.jsx("div",{children:e.jsx(b,{value:s.invoiceNo,onChange:n=>r(t=>({...t,invoiceNo:n})),placeholder:"Invoice #",className:"text-right font-semibold"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 my-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold mb-2",children:"From"}),e.jsx(b,{value:s.from.name,onChange:n=>r(t=>({...t,from:{...t.from,name:n}})),placeholder:"Your Name/Company"}),e.jsx(b,{isTextarea:!0,value:s.from.address,onChange:n=>r(t=>({...t,from:{...t.from,address:n}})),placeholder:"Your Address"}),e.jsx(b,{type:"email",value:s.from.email,onChange:n=>r(t=>({...t,from:{...t.from,email:n}})),placeholder:"Email Address"}),e.jsx(b,{type:"tel",value:s.from.phone,onChange:n=>r(t=>({...t,from:{...t.from,phone:n}})),placeholder:"Phone Number"}),e.jsx(b,{value:s.from.taxId,onChange:n=>r(t=>({...t,from:{...t.from,taxId:n}})),placeholder:"PAN / Tax ID"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold mb-2",children:"To"}),e.jsx(b,{value:s.to.name,onChange:n=>r(t=>({...t,to:{...t.to,name:n}})),placeholder:"Client Name/Company"}),e.jsx(b,{isTextarea:!0,value:s.to.address,onChange:n=>r(t=>({...t,to:{...t.to,address:n}})),placeholder:"Client Address"}),e.jsx(b,{type:"email",value:s.to.email,onChange:n=>r(t=>({...t,to:{...t.to,email:n}})),placeholder:"Email Address"}),e.jsx(b,{type:"tel",value:s.to.phone,onChange:n=>r(t=>({...t,to:{...t.to,phone:n}})),placeholder:"Phone Number"}),e.jsx(b,{value:s.to.taxId,onChange:n=>r(t=>({...t,to:{...t.to,taxId:n}})),placeholder:"PAN / Tax ID"})]}),s.showShipping&&e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold mb-2",children:"Ship To"}),e.jsx(b,{value:s.shipTo.name,onChange:n=>r(t=>({...t,shipTo:{...t.shipTo,name:n}})),placeholder:"Shipping Name"}),e.jsx(b,{isTextarea:!0,value:s.shipTo.address,onChange:n=>r(t=>({...t,shipTo:{...t.shipTo,address:n}})),placeholder:"Shipping Address"})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50 dark:bg-gray-900/50",children:[e.jsx("h3",{className:"font-bold",children:"Invoice Settings"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold block mb-1",children:"Paper Size"}),e.jsxs("div",{className:"flex rounded-md border p-1 bg-gray-200 dark:bg-gray-800",children:[e.jsx("button",{onClick:()=>r(n=>({...n,paperSize:"A4"})),className:`flex-1 p-1 rounded ${s.paperSize==="A4"?"bg-white dark:bg-black shadow":""}`,children:"A4"}),e.jsx("button",{onClick:()=>r(n=>({...n,paperSize:"4x6"})),className:`flex-1 p-1 rounded ${s.paperSize==="4x6"?"bg-white dark:bg-black shadow":""}`,children:"4x6 Inch"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[e.jsx("label",{className:"font-semibold",children:"Mark as Paid"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.isPaid,onChange:n=>r(t=>({...t,isPaid:n.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-600"})]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"bg-purple-600 text-white p-3 rounded-t-lg grid grid-cols-12 gap-2 font-semibold",children:[e.jsx("div",{className:"col-span-5",children:"Item"}),e.jsx("div",{className:"col-span-2",children:"Quantity"}),e.jsx("div",{className:"col-span-2",children:"Rate"}),e.jsx("div",{className:"col-span-3 text-right",children:"Amount"})]}),e.jsxs("div",{className:"border border-t-0 rounded-b-lg p-2 dark:border-gray-700",children:[s.items.map(n=>e.jsxs("div",{className:"py-2 border-b dark:border-gray-700 last:border-b-0",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-start",children:[e.jsx("div",{className:"col-span-5",children:e.jsx(b,{value:n.name,onChange:t=>i(n.id,"name",t),placeholder:"Item Name"})}),e.jsx("div",{className:"col-span-2",children:e.jsx(b,{type:"number",value:String(n.quantity),onChange:t=>i(n.id,"quantity",Number(t)),placeholder:"1"})}),e.jsx("div",{className:"col-span-2",children:e.jsx(b,{type:"number",value:String(n.rate),onChange:t=>i(n.id,"rate",Number(t)),placeholder:"0.00"})}),e.jsx("div",{className:"col-span-2 p-1 font-semibold text-sm text-right",children:v(n.quantity*n.rate,s.currency.symbol)}),e.jsx("div",{className:"col-span-1 flex justify-end",children:e.jsx("button",{onClick:()=>d(n.id),children:e.jsx(K,{className:"h-5 w-5 text-gray-400 hover:text-red-500"})})})]}),l[n.id]&&e.jsx("div",{className:"mt-1 ml-2",children:e.jsx(A,{value:n.description,onChange:t=>i(n.id,"description",t),placeholder:"Item Description"})}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 text-purple-600",children:[e.jsx("button",{onClick:()=>w(n.id),children:"+ Add Description"}),e.jsxs("select",{value:n.unit,onChange:t=>i(n.id,"unit",t.target.value),className:"bg-transparent font-semibold",children:[e.jsx("option",{children:"Service"}),e.jsx("option",{children:"hrs"}),e.jsx("option",{children:"pcs"}),e.jsx("option",{children:"item"})]})]}),e.jsx("button",{onClick:()=>N(n.id),className:"text-purple-600 font-semibold",children:"Duplicate"})]})]},n.id)),e.jsxs("div",{className:"mt-2 flex gap-4",children:[e.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-brand-red font-semibold",children:[e.jsx(X,{className:"h-5 w-5"})," Add Item"]}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 text-purple-600 font-semibold",children:[e.jsx(ee,{className:"h-5 w-5"})," Generate Items with AI"]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("div",{className:"w-full md:w-1/2 lg:w-2/5",children:e.jsxs("div",{className:"space-y-2 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:v(R,s.currency.symbol)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Discount"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:s.currency.symbol}),e.jsx("input",{type:"number",value:s.discount,onChange:n=>r(t=>({...t,discount:parseFloat(n.target.value)||0})),className:"w-24 p-1 bg-transparent text-right rounded focus:bg-white dark:focus:bg-black"})]})]}),s.taxRate>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Tax (",s.taxRate,"%)"]}),e.jsx("span",{children:v(D,s.currency.symbol)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Shipping"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:s.currency.symbol}),e.jsx("input",{type:"number",value:s.shipping,onChange:n=>r(t=>({...t,shipping:parseFloat(n.target.value)||0})),className:"w-24 p-1 bg-transparent text-right rounded focus:bg-white dark:focus:bg-black"})]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg pt-2 border-t dark:border-gray-700",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:v(L,s.currency.symbol)})]})]})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mt-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold mb-2",children:"Signature"}),e.jsxs("div",{...S(),className:"cursor-pointer",children:[e.jsx("input",{...y()}),s.signature?e.jsx("img",{src:s.signature,alt:"Signature",className:"h-16 w-auto"}):e.jsxs("div",{className:"p-4 border-2 border-dashed rounded text-center text-gray-500 hover:border-brand-red flex flex-col items-center gap-2",children:[e.jsx(se,{className:"h-6 w-6"})," Upload Signature"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold mb-2",children:"Notes"}),e.jsx(A,{value:s.notes,onChange:n=>r(t=>({...t,notes:n}))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold mb-2",children:"Terms"}),e.jsx(A,{value:s.terms,onChange:n=>r(t=>({...t,terms:n}))})]})]})]})]}),e.jsx(ie,{isOpen:h,onClose:()=>u(!1),onAddItems:k})]})},le=({data:s,setTemplate:r,selectedTemplate:o})=>{const m=p.useRef(null),l=p.useRef(null);return z(s,m,l),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Choose a Template"}),["classic","modern","minimalist"].map(x=>e.jsxs("button",{onClick:()=>r(x),className:`w-full p-4 border-2 rounded-lg transition-colors text-left ${o===x?"border-brand-red font-bold":"border-gray-300 dark:border-gray-700"}`,children:[x.charAt(0).toUpperCase()+x.slice(1)," Template"]},x))]}),e.jsx("div",{className:"lg:col-span-2 bg-gray-100 dark:bg-gray-800 p-4 rounded-lg flex justify-center items-start",children:e.jsx("div",{ref:m,className:"invoice-preview-container",children:e.jsx("div",{ref:l,children:e.jsx(G,{data:s,template:o})})})})]})},ce=({data:s,template:r})=>{const o=p.useRef(null),m=p.useRef(null);z(s,m,o);const[l,x]=p.useState(null),f=async a=>{const i=o.current;if(!i)throw new Error("Preview element not found");const c=await q(i,{scale:3});if(a==="png")return new Promise(d=>c.toBlob(N=>d(N),"image/png"));{const d=s.paperSize==="4x6"&&c.width>c.height?"l":"p",N=s.paperSize==="4x6"?[152.4,101.6]:"a4",w=new ne({orientation:d,unit:"mm",format:N}),C=w.internal.pageSize.getWidth(),S=c.height*C/c.width,y=c.toDataURL("image/png");return w.addImage(y,"PNG",0,0,C,S),w.output("blob")}},g=async()=>{if(!l)return;const a=await f(l),i=URL.createObjectURL(a),c=document.createElement("a");c.href=i,c.download=`invoice-${s.invoiceNo}.${l}`,c.click(),URL.revokeObjectURL(i),x(null)},h=async()=>{const a=o.current;if(!a)return;const c=(await q(a,{scale:3})).toDataURL("image/png"),d=window.open("","_blank");d&&(d.document.write("<html><head><title>Print Invoice</title><style>@page { size: A4; margin: 0; } body { margin: 0; } img { width: 100%; }</style></head><body>"),d.document.write(`<img src="${c}" />`),d.document.write("</body></html>"),d.document.close(),d.focus(),d.onload=()=>{d.print(),d.close()})},u=async a=>{const i=await f("pdf"),c=new File([i],`invoice-${s.invoiceNo}.pdf`,{type:"application/pdf"}),d=`Here is the invoice #${s.invoiceNo}.`,N=window.location.href;if(a==="generic"&&navigator.share)try{await navigator.share({files:[c],title:`Invoice ${s.invoiceNo}`,text:d})}catch(w){console.error("Share failed:",w)}else a==="whatsapp"?window.open(`https://wa.me/?text=${encodeURIComponent(`${d} - ${N}`)}`,"_blank"):a==="gmail"&&window.open(`mailto:?subject=${encodeURIComponent(`Invoice ${s.invoiceNo}`)}&body=${encodeURIComponent(`${d}

${N}`)}`,"_blank")};return e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Design & Share"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>x(a=>a?null:"pdf"),className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg flex justify-center items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"})," Download"]}),l&&e.jsxs("div",{className:"p-2 bg-gray-100 dark:bg-gray-800 rounded-lg flex flex-col gap-2 animate-fade-in-down",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>x("pdf"),className:`flex-1 p-2 rounded text-sm font-semibold ${l==="pdf"?"bg-gray-400 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"PDF"}),e.jsx("button",{onClick:()=>x("png"),className:`flex-1 p-2 rounded text-sm font-semibold ${l==="png"?"bg-gray-400 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:"PNG"})]}),e.jsx("button",{onClick:g,className:"w-full bg-blue-500 hover:bg-blue-600 text-white p-2 rounded text-sm font-semibold",children:"Confirm Download"})]}),e.jsxs("button",{onClick:h,className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg flex justify-center items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"})," Print Invoice"]})]}),e.jsxs("div",{className:"pt-4 border-t dark:border-gray-700",children:[e.jsx("h3",{className:"font-semibold mb-2 text-center",children:"Share via"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>u("gmail"),className:"flex items-center justify-center gap-2 p-2 bg-red-100 text-red-700 rounded-lg",children:[e.jsx(J,{className:"h-5 w-5"})," Gmail"]}),e.jsxs("button",{onClick:()=>u("whatsapp"),className:"flex items-center justify-center gap-2 p-2 bg-green-100 text-green-700 rounded-lg",children:[e.jsx(Q,{className:"h-5 w-5"})," WhatsApp"]}),e.jsxs("button",{onClick:()=>u("generic"),className:"col-span-2 flex items-center justify-center gap-2 p-2 bg-gray-200 text-gray-700 rounded-lg",children:[e.jsx(V,{className:"h-5 w-5"})," More Options"]})]})]})]}),e.jsx("div",{className:"lg:col-span-2 bg-gray-100 dark:bg-gray-800 p-4 rounded-lg flex justify-center items-start",children:e.jsx("div",{ref:m,className:"invoice-preview-container",children:e.jsx("div",{ref:o,children:e.jsx(G,{data:s,template:r})})})})]})},de=({icon:s,title:r,text:o})=>e.jsxs("div",{className:"bg-white dark:bg-black border border-gray-200 dark:border-gray-800 p-6 rounded-lg shadow-md text-center border-glow-hover",children:[e.jsx("div",{className:"inline-flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/50 mb-4",children:e.jsx(s,{className:"h-7 w-7 text-brand-red"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:r}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o})]}),me=({item:s,isOpen:r,toggle:o})=>e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:o,className:"w-full flex justify-between items-center text-left py-4 focus:outline-none",children:[e.jsx("span",{className:"text-base font-semibold",children:s.q}),e.jsx("span",{className:`transform transition-transform duration-300 ${r?"rotate-180":""}`,children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${r?"max-h-96 pb-4":"max-h-0"}`,children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed pr-4",children:s.a})})]}),be=()=>{const[s,r]=p.useState(1),[o,m]=p.useState(ae),[l,x]=p.useState("classic"),[f,g]=p.useState(0),{user:h}=U(),u=M(),a=O(),i=p.useRef(null),c=()=>{i.current?.scrollIntoView({behavior:"smooth"})};p.useEffect(()=>{const y=a.state?.restoredData;y&&(m(y),r(2),u(a.pathname,{replace:!0,state:{}}))},[a.state,u]);const d=()=>{s===1&&!h?(localStorage.setItem("pendingInvoiceData",JSON.stringify(o)),u("/login",{state:{from:"/invoice-generator"}})):r(y=>Math.min(y+1,3))},N=()=>r(y=>Math.max(y-1,1)),w=()=>{switch(s){case 1:return e.jsx(oe,{data:o,setData:m});case 2:return e.jsx(le,{data:o,setTemplate:x,selectedTemplate:l});case 3:return e.jsx(ce,{data:o,template:l});default:return null}},C=[{icon:B,title:"Completely Free",text:"Create, customize, and download unlimited invoices without any cost."},{icon:W,title:"Multiple Templates",text:"Choose from classic, modern, and minimalist designs to match your brand."},{icon:E,title:"Easy Customization",text:"Add your logo, edit all fields, and tailor the invoice to your specific needs."},{icon:Y,title:"Multi-Currency Support",text:"Bill clients in their local currency with our extensive currency options."},{icon:F,title:"Instant Downloads",text:"Get your final invoice as a professional PDF or a high-quality PNG image."},{icon:_,title:"Secure & Private",text:"Your invoice data is processed in your browser and is never stored on our servers."}],S=[{q:"What is an invoice?",a:"An invoice is a commercial document issued by a seller to a buyer, detailing a transaction and indicating the products, quantities, and agreed prices for products or services the seller has provided. It serves as a request for payment and is a crucial tool for business accounting and record-keeping."},{q:"Is the invoice generator really free?",a:"Yes, it is 100% free to create and download unlimited invoices. No watermarks, no hidden fees."},{q:"Can I save my invoice to edit later?",a:"To save your progress and access invoices from any device, you need to sign up for a free PDFBullet account. This allows us to securely save your data."},{q:"Is my invoice data saved on your servers?",a:"No. For your privacy, all invoice creation and data processing happens directly in your browser. We do not see or store your financial data unless you are logged in and choose to save it."},{q:"Can I add my company logo?",a:"Absolutely! You can upload your company logo in the 'From' section. It will automatically appear on your invoice."},{q:"What formats can I download my invoice in?",a:"You can download your final invoice as a universally compatible PDF file or as a high-resolution PNG image."}];return e.jsxs("div",{className:"bg-white dark:bg-black overflow-x-hidden",children:[e.jsx("section",{className:"py-20 md:py-24",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold text-gray-800 dark:text-gray-100",children:"Free Invoice Generator"}),e.jsx("p",{className:"mt-6 text-lg text-gray-600 dark:text-gray-300",children:"Create professional invoices in seconds. Customize with your logo, add items, and download as a PDF for free. Simple, fast, and no sign-up required to create."}),e.jsx("div",{className:"mt-8",children:e.jsx("button",{onClick:c,className:"inline-block bg-brand-red hover:bg-brand-red-dark text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors",children:"Create Invoice Now"})})]}),e.jsx("div",{className:"relative",children:e.jsx("img",{src:"https://ik.imagekit.io/fonepay/Invoice-Template.png?updatedAt=1753101972128",alt:"A preview of a professional invoice template",className:"rounded-lg shadow-xl"})})]})})}),e.jsx("div",{ref:i,className:"bg-gray-50 dark:bg-black py-16 min-h-screen scroll-mt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-8",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Create Your Invoice"}),e.jsxs("div",{className:"flex gap-2",children:[s>1&&e.jsx("button",{onClick:N,className:"bg-gray-200 dark:bg-gray-700 font-semibold py-2 px-4 rounded-lg",children:"Back"}),s<3&&e.jsx("button",{onClick:d,className:"bg-brand-red text-white font-semibold py-2 px-4 rounded-lg",children:s===1&&!h?"Login to Continue":"Next"})]})]}),w()]})}),e.jsx("section",{className:"py-20 md:py-24 bg-white dark:bg-black",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 dark:text-gray-100",children:"Powerful Features, Zero Cost"}),e.jsx("p",{className:"mt-4 text-lg text-gray-600 dark:text-gray-300",children:"Everything you need to create professional invoices for your business."})]}),e.jsx("div",{className:"mt-16 grid sm:grid-cols-2 lg:grid-cols-3 gap-8",children:C.map((y,k)=>e.jsx(de,{...y},k))})]})}),e.jsx("section",{className:"bg-gray-50 dark:bg-black py-20",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsx("div",{className:"max-w-4xl mx-auto text-center",children:e.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 dark:text-gray-100",children:"Frequently Asked Questions"})}),e.jsx("div",{className:"max-w-3xl mx-auto mt-12 bg-white dark:bg-black p-6 rounded-lg shadow-lg border border-gray-200 dark:border-gray-800",children:S.map((y,k)=>e.jsx(me,{item:y,isOpen:f===k,toggle:()=>g(f===k?null:k)},k))})]})})]})};export{be as default};
