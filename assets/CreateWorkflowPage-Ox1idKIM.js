import{a as v,d as N,r as s,T as b,j as e,L as g,R as S,y as W}from"./main-CCvC7wqh.js";import{u as C}from"./useWorkflows-B580WdUC.js";import"./react-Ckhrjn13.js";const I=()=>{const m=v(),f=N(),{addWorkflow:h,updateWorkflow:w}=C(),t=f.state?.workflow,[l,u]=s.useState(t?.name||""),[a,n]=s.useState(()=>t?t.tools.map((r,o)=>{const x=b.find(j=>j.title===r);return x?{id:Date.now()+o,tool:x}:null}).filter(r=>r!==null):[]),[d,i]=s.useState(""),c=b.filter(r=>r.api&&r.category),k=()=>{if(!d)return;const r=c.find(o=>o.id===d);r&&(n([...a,{id:Date.now(),tool:r}]),i(""))},p=r=>{n(a.filter(o=>o.id!==r))},y=()=>{const r={name:l,tools:a.map(o=>o.tool.title)};t?w({...t,...r}):h(r),m("/workflows",{state:{workflowSaved:!0}})};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 dark:text-gray-100",children:[e.jsx(g,{to:"/workflows",className:"text-gray-400 dark:text-gray-500 hover:underline",children:"Workflows"}),e.jsx("span",{className:"text-gray-400 dark:text-gray-500 mx-2",children:"/"}),e.jsx("span",{children:t?"Edit workflow":"Create new workflow"})]}),e.jsx(g,{to:"/pricing",className:"bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-bold py-2 px-4 rounded-md flex items-center gap-2 transition-colors text-sm sm:text-base",children:e.jsx("span",{children:"Upgrade to Premium"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-surface-dark p-8 rounded-lg shadow-lg border border-gray-200 dark:border-gray-800 space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Tool selection"}),e.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/20 border-t-4 border-blue-400 rounded-md",children:[e.jsx("label",{htmlFor:"workflowName",className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:"Workflow name"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 mb-2",children:"Enter a workflow name so you can find it in tools and on the homepage."}),e.jsx("input",{type:"text",id:"workflowName",value:l,onChange:r=>u(r.target.value),placeholder:"Enter workflow name",className:"w-full px-4 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-brand-red focus:border-brand-red"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tool-select",className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Select a tool:"}),e.jsxs("select",{id:"tool-select",value:d,onChange:r=>i(r.target.value),className:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-brand-red focus:border-brand-red",children:[e.jsx("option",{value:"",children:"Available tools..."}),c.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))]})]}),e.jsxs("button",{onClick:k,disabled:!d,className:"w-full flex items-center justify-center gap-2 py-3 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Add step ",e.jsx(S,{className:"h-4 w-4"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-dark p-8 rounded-lg shadow-lg border border-gray-200 dark:border-gray-800",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Workflow preview"}),a.length===0?e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-16",children:e.jsx("p",{children:"Add tools to start building your workflow"})}):e.jsx("div",{className:"space-y-4",children:a.map((r,o)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border dark:border-gray-700",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-brand-red text-white flex items-center justify-center font-bold",children:o+1}),e.jsx("div",{className:`p-2 rounded-md ${r.tool.color}`,children:e.jsx(r.tool.Icon,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"flex-grow",children:e.jsx("p",{className:"font-semibold",children:r.tool.title})}),e.jsx("button",{onClick:()=>p(r.id),className:"p-2 text-gray-400 hover:text-red-500 rounded-full hover:bg-red-100 dark:hover:bg-red-900/50",children:e.jsx(W,{className:"h-5 w-5"})})]},r.id))})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:e.jsx("button",{onClick:y,disabled:!l||a.length===0,className:"bg-brand-red hover:bg-brand-red-dark text-white font-bold py-3 px-8 rounded-md transition-colors disabled:bg-red-300 dark:disabled:bg-red-800",children:"Save Workflow"})})]})};export{I as default};
